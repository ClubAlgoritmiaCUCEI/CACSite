(this.webpackJsonpcac_site=this.webpackJsonpcac_site||[]).push([[12],{508:function(e,t,c){},533:function(e,t,c){"use strict";c.r(t);var a=c(3),n=c.n(a),r=c(4),l=c(0),s=c.n(l),u=c(31),i=c(18),o=c(6),p=c(29),b=c(8),_=c(32),m=c(9),d=c(98),f=c(95);c(508);t.default=function(e){var t=e.Fallback,c=Object(l.useContext)(p.a),a=Object(l.useContext)(b.c),v=Object(l.useContext)(b.a),h=Object(l.useState)(""),j=Object(r.a)(h,2),O=j[0],C=j[1],E=Object(l.useState)(""),k=Object(r.a)(E,2),N=k[0],x=k[1],y=Object(l.useState)(!1),g=Object(r.a)(y,2),w=g[0],S=g[1],P=Object(l.useState)(!1),M=Object(r.a)(P,2),T=M[0],D=M[1],F=Object(l.useState)({visible:!1,content:"",type:""}),H=Object(r.a)(F,2),J=H[0],L=H[1],U=Object(l.useState)(null),q=Object(r.a)(U,2),Q=q[0],R=q[1],V=Object(l.useState)(!1),Y=Object(r.a)(V,2),z=Y[0],A=Y[1],B=Object(l.useRef)(null),G=Object(u.useMediaQuery)({query:"(max-width: 980px)"}),I=Object(i.g)();Object(l.useEffect)((function(){c.fetch.public()}),[c.fetch]);var K=function(){x(""),C(""),S("")};return Object(_.a)(B,(function(){return A(!1)})),s.a.createElement("div",{className:"cac_public"},z&&s.a.createElement("div",{className:"cac_public_background-black"},s.a.createElement("div",{className:"cac_public_post-container",ref:B},s.a.createElement(d.a,{allUsers:v.usersMap,className:"cac_public_post",data:c.posts.public.find((function(e){return e.id===Q})),cropContent:!1,showCommentaries:!0,user:a,from:"public",parentHandleDelete:function(){A(!1),L({visible:!0,content:"Post removed",type:"success"})}}))),J.visible&&s.a.createElement(f.a,{className:J.type,onClick:function(){return L({visible:!1})}},J.content),w?s.a.createElement("div",{className:"cac_public_create cac_public_create--creating"},s.a.createElement("textarea",{className:"cac_public_create_text-area cac_public_create_text-area--title",value:N,placeholder:"Title",onChange:function(e){return x(e.target.value)}}),s.a.createElement("textarea",{className:"cac_public_create_text-area cac_public_create_text-area--content",value:O,placeholder:"Content (Markdown)",onChange:function(e){return C(e.target.value)}}),s.a.createElement(m.b,{className:"cac_public_create_button cac_public_create_button--post ".concat(T||""===N||""===O?"cac_public_create_button--disabled":""),onClick:function(){a.logged?T||""===N||""===O||function(){var e;n.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return D(!0),e={title:N,content:O,type:"public-post",comments:[],likesList:[],likesCounter:0,author:{id:a.uid,displayName:a.displayName},timestamp:o.c.firestore.FieldValue.serverTimestamp(),key:Date.now()},t.prev=2,t.next=5,n.a.awrap(o.d.collection("public").add(e));case 5:L({visible:!0,content:"Post published succesfully",type:"success"}),K(),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),console.error(t.t0),L({visible:!0,content:"Error publishing post",type:"error"});case 13:D(!1);case 14:case"end":return t.stop()}}),null,null,[[2,9]])}():L({visible:!0,type:"error",content:"You need to sign in to post"})}},"Post"),s.a.createElement(m.b,{className:"cac_public_create_button cac_public_create_button--cancel",onClick:K},"Cancel")):s.a.createElement("div",{className:"cac_public_create cac_public_create--default"},s.a.createElement("textarea",{className:"cac_public_create_text-area cac_public_create_text-area--title",value:"",onChange:function(e){S(!0),x(e.target.value)},onClick:function(){return S(!0)},placeholder:"Create Post"}),s.a.createElement(m.b,{className:"cac_public_create_button  cac_public_create_button--post cac_public_create_button--disabled"},"Post")),s.a.createElement("div",{className:"cac_public_posts"},!a.isLoading&&c.posts.public.length>0&&Object.keys(v.usersMap).length>0?c.posts.public.map((function(e,t){return s.a.createElement(d.a,{user:a,key:t,data:e,allUsers:v.usersMap,cropContent:!0,onClick:function(){return t=e.id,void(G?I.push("/public/".concat(t)):(R(t),A(!0)));var t},showCommentaries:!1,from:"public",parentHandleDelete:function(){L({visible:!0,content:"Post removed",type:"success"})}})})):s.a.createElement(t,null)))}},95:function(e,t,c){"use strict";c.d(t,"a",(function(){return r}));var a=c(0),n=c.n(a);c(97);t.b=function(e){var t=e.children;return n.a.createElement("div",{className:"cac_popup"},t)};var r=function(e){var t=e.children,c=e.className,r=void 0===c?"error":c,l=e.onClick,s=void 0===l?function(){return null}:l;return Object(a.useEffect)((function(){var e=setTimeout((function(){s()}),5e3);return function(){return clearTimeout(e)}})),n.a.createElement("div",{onClick:s,className:"cac_popup-top ".concat(r||"")},t)}},97:function(e,t,c){}}]);
//# sourceMappingURL=12.7d0133bd.chunk.js.map