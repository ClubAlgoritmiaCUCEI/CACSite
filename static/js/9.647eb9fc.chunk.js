(this.webpackJsonpcac_site=this.webpackJsonpcac_site||[]).push([[9],{102:function(e,a,t){"use strict";t.d(a,"a",(function(){return r}));var c=t(0),n=t.n(c);t(105);a.b=function(e){var a=e.children;return n.a.createElement("div",{className:"cac_popup"},a)};var r=function(e){var a=e.children,t=e.className,r=void 0===t?"error":t,s=e.onClick,i=void 0===s?function(){return null}:s;return Object(c.useEffect)((function(){var e=setTimeout((function(){i()}),5e3);return function(){return clearTimeout(e)}})),n.a.createElement("div",{onClick:i,className:"cac_popup-top ".concat(r||"")},a)}},103:function(e,a,t){"use strict";var c=t(0),n=t.n(c),r=t(23),s=t(8),i=t(5),o=t(21),u=t.n(o);t(139);a.a=function(e){var a=e.user,t=e.className,c=e.onClick,o=e.redirect,l=void 0===o||o,d=Object(s.g)();return n.a.createElement("div",{className:"cac_user-box ".concat(t||""," ").concat(l?"":"cac_user-box--redirect"),onClick:c},n.a.createElement("img",{onClick:function(){return l&&d.push("/profile/".concat(a.id))},className:"cac_user-box_photo",src:a.photoURL||u.a,alt:a.displayName}),n.a.createElement("div",{className:"cac_user-box_text"},l?n.a.createElement(i.b,{to:"/profile/".concat(a.id),className:"cac_user-box_name--link"},n.a.createElement(r.a,{rank:a.rank,className:"cac_user-box_name"},a.displayName)):n.a.createElement(r.a,{rank:a.rank,className:"cac_user-box_name"},a.displayName),n.a.createElement(r.a,{rank:a.rank,className:"cac_user-box_ranking"},a.rating||"")))}},105:function(e,a,t){},112:function(e,a,t){"use strict";t.d(a,"a",(function(){return r}));var c=t(28);var n=t(36);function r(e){return function(e){if(Array.isArray(e))return Object(c.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(n.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},118:function(e,a,t){"use strict";var c=t(112),n=t(3),r=t(0),s=t.n(r),i=t(9),o=t(103),u=(t(140),function(e){var a=e.handleUserClick,t=Object(r.useContext)(i.a),c=Object(r.useState)(""),u=Object(n.a)(c,2),l=u[0],d=u[1],m=Object(r.useState)(!0),f=Object(n.a)(m,2),p=f[0],_=f[1],b=Object(r.useState)([]),v=Object(n.a)(b,2),E=v[0],N=v[1],k=Object(r.useState)(),j=Object(n.a)(k,2),O=j[0],y=j[1];return Object(r.useEffect)((function(){if(!t.isCFLoading&&p&&O!==l){_(!1),y(l);var e=l.toLowerCase();N(t.users.filter((function(a){return a.displayName&&a.displayName.toLowerCase().includes(e)}))),setTimeout((function(){_(!0)}),250)}}),[l,p,O,t]),s.a.createElement("div",{className:"cac_search-user"},s.a.createElement("input",{type:"text",className:"cac_search-user_input",value:l,placeholder:"User name",onChange:function(e){return d(e.target.value)}}),s.a.createElement("div",{className:"cac_search_users-container"},E.map((function(e,t){return s.a.createElement(o.a,{redirect:!1,key:t,user:e,onClick:function(){return a(e)}})}))))}),l=t(11);t(141),a.a=function(e){var a=e.close,t=e.handleConfirm,i=Object(r.useState)([]),d=Object(n.a)(i,2),m=d[0],f=d[1];return Object(r.useEffect)((function(){var e=function(e){"Escape"===e.key&&a()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[a]),s.a.createElement("div",{className:"cac_select-users"},s.a.createElement(u,{handleUserClick:function(e){-1===m.findIndex((function(a){return a.id===e.id}))&&f([].concat(Object(c.a)(m),[e]))}}),s.a.createElement("span",{className:"cac_select-users_title"},"Selected"),s.a.createElement("div",{className:"cac_select-users_users"},m.map((function(e){return s.a.createElement(o.a,{redirect:!1,key:e.id,user:e,onClick:function(){return function(e){f(m.filter((function(a){return a.id!==e.id})))}(e)}})}))),s.a.createElement("div",{className:"cac_select-users_button-container"},s.a.createElement(l.b,{onClick:a,className:"cac_select-users_button cac_select-users_button--cancel"},"Cancel"),s.a.createElement(l.b,{onClick:function(){m.length>0&&(t(m),a())},className:"cac_select-users_button cac_select-users_button ".concat(m.length>0?"":"cac_select-users_button-container--disabled")},"Confirm")))}},139:function(e,a,t){},140:function(e,a,t){},141:function(e,a,t){},142:function(e,a,t){},186:function(e,a,t){"use strict";t.r(a);var c=t(112),n=t(1),r=t(4),s=t.n(r),i=t(7),o=t(3),u=t(0),l=t.n(u),d=t(8),m=t(6),f=t(34),p=t(9),_=t(103),b=t(11),v=t(102),E=t(118);t(142);a.default=function(e){var a=Object(u.useContext)(f.a),t=Object(u.useContext)(p.c),r=Object(u.useContext)(p.a).usersMap,N=Object(u.useState)(!1),k=Object(o.a)(N,2),j=k[0],O=k[1],y=Object(u.useState)(!1),C=Object(o.a)(y,2),h=C[0],x=C[1],w=Object(u.useState)(!1),g=Object(o.a)(w,2),S=g[0],D=g[1],A=Object(u.useState)({open:!1,description:"",type:""}),L=Object(o.a)(A,2),U=L[0],F=L[1],T=e.preview,I=Object(d.g)(),J=T?e.classData:a.classData,V=(e.match.params||J).code;Object(u.useEffect)((function(){var e=function(){var e=Object(i.a)(s.a.mark((function e(){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=m.d.doc("class/".concat(V)),void 0!==J.attendances.find((function(e){return e.id===t.uid}))){e.next=4;break}return e.next=4,a.update({attendances:m.c.firestore.FieldValue.arrayUnion({id:t.uid,displayName:t.displayName})});case 4:x(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();!T&&t.logged&&!t.isLoading&&J.isDataAvailable&&!h&&J.active&&e()}),[h,t,J,V,T]),Object(u.useEffect)((function(){T||(V!==J.code?a.setClassData((function(e){return Object(n.a)(Object(n.a)({},e),{},{code:V})})):J.validCode||O(!0))}),[V,t,J,a,T]);var M=function(){var e=Object(i.a)(s.a.mark((function e(a){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(!1),n=m.d.doc("class/".concat(V)),e.next=4,n.update({attendances:(t=m.c.firestore.FieldValue).arrayUnion.apply(t,Object(c.a)(a.map((function(e){return{id:e.id,displayName:e.displayName}}))))});case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),R=function(){var e=Object(i.a)(s.a.mark((function e(){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T||!J.active){e.next=4;break}return a=m.d.doc("class/".concat(V)),e.next=4,a.update({active:!1});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.useEffect)((function(){J.isDataAvailable&&!J.active&&F({open:!0,type:"error",description:"Class ended"})}),[J.isDataAvailable,J.active]),l.a.createElement("div",{className:"cac_attendance cac_attendance--in-class"},U.open&&l.a.createElement(v.a,{onClick:function(){return F({open:!1})},className:U.type},U.description),j&&l.a.createElement(d.a,{to:"/attendance"}),S&&l.a.createElement(v.b,null,l.a.createElement(E.a,{close:function(){return D(!1)},handleConfirm:M})),(J.isDataAvailable||T)&&l.a.createElement("div",{className:"cac_attendance_class"},l.a.createElement("h3",{className:"cac_attendance_title"},J.title),l.a.createElement("span",{className:"cac_attendance_date"},T?J.date:J.date.toDate().toDateString()),l.a.createElement("div",{className:"cac_attendance_code-container"},l.a.createElement("span",{className:"cac_attendance_code-title"},"Code"),l.a.createElement("span",{className:"cac_attendance_code-code"},J.code)),l.a.createElement("div",{className:"cac_attendance_speakers-container"},l.a.createElement("span",{className:"cac_attendance_speakers-title"},"Speakers"),J.speakers.map((function(e,a){return l.a.createElement(_.a,{key:a,className:"cac_attendance_speaker_user-box",user:r[e.id]||e})}))),l.a.createElement("div",{className:"cac_attendance_description-container"},l.a.createElement("p",{className:"cac_attendance_description-title"},"Description"),l.a.createElement("p",{className:"cac_attendance_description-text"},J.description)),l.a.createElement("div",{className:"cac_attendance_attendant-container"},J.attendances.map((function(e,a){return l.a.createElement(_.a,{key:a,className:"cac_attendance_attendant",user:r[e.id]||e})})))),l.a.createElement("div",{className:"cac_attendance_buttons"},l.a.createElement(b.b,{className:"cac_attendance_button cac_attendance_add",onClick:function(){console.log(a),I.push("/attendance"),a.setClassData({isDataAvailable:!1,code:""})}},"Change"),t.isAdmin&&l.a.createElement(l.a.Fragment,null,l.a.createElement(b.b,{className:"cac_attendance_button cac_attendance_end",onClick:R},"End class"),l.a.createElement(b.b,{className:"cac_attendance_button cac_attendance_add",onClick:function(){T||D(!0)}},"Add people"))))}}}]);
//# sourceMappingURL=9.647eb9fc.chunk.js.map