(this.webpackJsonpcac_site=this.webpackJsonpcac_site||[]).push([[6],{103:function(e,a,t){"use strict";var c=t(97),n=t(4),s=t(0),r=t.n(s),i=t(9),o=t(90),l=(t(125),function(e){var a=e.handleUserClick,t=Object(s.useContext)(i.a),c=Object(s.useState)(""),l=Object(n.a)(c,2),u=l[0],d=l[1],m=Object(s.useState)(!0),f=Object(n.a)(m,2),p=f[0],_=f[1],b=Object(s.useState)([]),v=Object(n.a)(b,2),E=v[0],N=v[1],j=Object(s.useState)(),k=Object(n.a)(j,2),O=k[0],C=k[1];return Object(s.useEffect)((function(){if(!t.isCFLoading&&p&&O!==u){_(!1),C(u);var e=u.toLocaleLowerCase();N(t.users.filter((function(a){return a.displayName.toLocaleLowerCase().includes(e)}))),setTimeout((function(){_(!0)}),250)}}),[u,p,O,t]),r.a.createElement("div",{className:"cac_search-user"},r.a.createElement("input",{type:"text",className:"cac_search-user_input",value:u,placeholder:"User name",onChange:function(e){return d(e.target.value)}}),r.a.createElement("div",{className:"cac_search_users-container"},E.map((function(e,t){return r.a.createElement(o.a,{key:t,user:e,onClick:function(){return a(e)}})}))))}),u=t(8);t(126),a.a=function(e){var a=e.close,t=e.handleConfirm,i=Object(s.useState)([]),d=Object(n.a)(i,2),m=d[0],f=d[1];return r.a.createElement("div",{className:"cac_select-users"},r.a.createElement(l,{handleUserClick:function(e){-1===m.findIndex((function(a){return a.id===e.id}))&&f([].concat(Object(c.a)(m),[e]))}}),r.a.createElement("span",{className:"cac_select-users_title"},"Selected"),r.a.createElement("div",{className:"cac_select-users_users"},m.map((function(e){return r.a.createElement(o.a,{key:e.id,user:e,onClick:function(){return function(e){f(m.filter((function(a){return a.id!==e.id})))}(e)}})}))),r.a.createElement("div",{className:"cac_select-users_button-container"},r.a.createElement(u.b,{onClick:a,className:"cac_select-users_button cac_select-users_button--cancel"},"Cancel"),r.a.createElement(u.b,{onClick:function(){m.length>0&&(t(m),a())},className:"cac_select-users_button cac_select-users_button ".concat(m.length>0?"":"cac_select-users_button-container--disabled")},"Confirm")))}},124:function(e,a,t){},125:function(e,a,t){},126:function(e,a,t){},127:function(e,a,t){},164:function(e,a,t){"use strict";t.r(a);var c=t(97),n=t(1),s=t(3),r=t.n(s),i=t(4),o=t(0),l=t.n(o),u=t(16),d=t(5),m=t(27),f=t(9),p=t(90),_=t(8),b=t(81),v=t(103);t(127);a.default=function(e){var a=Object(o.useContext)(m.a),t=Object(o.useContext)(f.c),s=Object(o.useContext)(f.a).usersMap,E=Object(o.useState)(!1),N=Object(i.a)(E,2),j=N[0],k=N[1],O=Object(o.useState)(!1),C=Object(i.a)(O,2),y=C[0],h=C[1],x=Object(o.useState)(!1),g=Object(i.a)(x,2),w=g[0],S=g[1],A=Object(o.useState)({open:!1,description:"",type:""}),D=Object(i.a)(A,2),L=D[0],U=D[1],T=e.preview,F=T?e.classData:a.classData,I=(e.match.params||F).code;Object(o.useEffect)((function(){!T&&t.logged&&!t.isLoading&&F.isDataAvailable&&!y&&F.active&&function(){var e;r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(e=d.d.doc("class/".concat(I)),void 0!==F.attendances.find((function(e){return e.id===t.uid}))){a.next=4;break}return a.next=4,r.a.awrap(e.update({attendances:d.c.firestore.FieldValue.arrayUnion({id:t.uid,displayName:t.displayName})}));case 4:h(!0);case 5:case"end":return a.stop()}}))}()}),[y,t,F,I,T]),Object(o.useEffect)((function(){T||(I!==F.code?a.setClassData((function(e){return Object(n.a)({},e,{code:I})})):F.validCode||k(!0))}),[I,t,F,a,T]);return Object(o.useEffect)((function(){F.isDataAvailable&&!F.active&&U({open:!0,type:"error",description:"Class ended"})}),[F.isDataAvailable,F.active]),l.a.createElement("div",{className:"cac_attendance cac_attendance--in-class"},L.open&&l.a.createElement(b.a,{onClick:function(){return U({open:!1})},className:L.type},L.description),j&&l.a.createElement(u.a,{to:"/attendance"}),w&&l.a.createElement(b.b,null,l.a.createElement(v.a,{close:function(){return S(!1)},handleConfirm:function(e){var a,t;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return S(!1),t=d.d.doc("class/".concat(I)),n.next=4,r.a.awrap(t.update({attendances:(a=d.c.firestore.FieldValue).arrayUnion.apply(a,Object(c.a)(e.map((function(e){return{id:e.id,displayName:e.displayName}}))))}));case 4:console.log("???");case 5:case"end":return n.stop()}}))}})),(F.isDataAvailable||T)&&l.a.createElement("div",{className:"cac_attendance_class"},l.a.createElement("h3",{className:"cac_attendance_title"},F.title),l.a.createElement("span",{className:"cac_attendance_date"},T?F.date:F.date.toDate().toDateString()),l.a.createElement("div",{className:"cac_attendance_code-container"},l.a.createElement("span",{className:"cac_attendance_code-title"},"Code"),l.a.createElement("span",{className:"cac_attendance_code-code"},F.code)),l.a.createElement("div",{className:"cac_attendance_speakers-container"},l.a.createElement("span",{className:"cac_attendance_speakers-title"},"Speakers"),F.speakers.map((function(e,a){return l.a.createElement(p.a,{key:a,className:"cac_attendance_speaker_user-box",user:s[e.id]||e})}))),l.a.createElement("div",{className:"cac_attendance_description-container"},l.a.createElement("p",{className:"cac_attendance_description-title"},"Description"),l.a.createElement("p",{className:"cac_attendance_description-text"},F.description)),l.a.createElement("div",{className:"cac_attendance_attendant-container"},F.attendances.map((function(e,a){return l.a.createElement(p.a,{key:a,className:"cac_attendance_attendant",user:s[e.id]||e})})))),l.a.createElement("div",{className:"cac_attendance_buttons"},l.a.createElement(_.b,{className:"cac_attendance_button cac_attendance_end",onClick:function(){var e;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(T||!F.active){a.next=4;break}return e=d.d.doc("class/".concat(I)),a.next=4,r.a.awrap(e.update({active:!1}));case 4:case"end":return a.stop()}}))}},"End class"),l.a.createElement(_.b,{className:"cac_attendance_button cac_attendance_add",onClick:function(){T||S(!0)}},"Add people")))}},81:function(e,a,t){"use strict";t.d(a,"a",(function(){return s}));var c=t(0),n=t.n(c);t(87);a.b=function(e){var a=e.children;return n.a.createElement("div",{className:"cac_popup"},a)};var s=function(e){var a=e.children,t=e.className,s=void 0===t?"error":t,r=e.onClick,i=void 0===r?function(){return null}:r;return Object(c.useEffect)((function(){var e=setTimeout((function(){i()}),5e3);return function(){return clearTimeout(e)}})),n.a.createElement("div",{onClick:i,className:"cac_popup-top ".concat(s||"")},a)}},87:function(e,a,t){},90:function(e,a,t){"use strict";var c=t(0),n=t.n(c),s=t(18),r=t(7),i=t(25),o=t.n(i);t(124);a.a=function(e){var a=e.user,t=e.className,c=e.onClick;return n.a.createElement("div",{className:"cac_user-box ".concat(t||""),onClick:c},n.a.createElement("img",{className:"cac_user-box_photo",src:a.photoURL||o.a,alt:a.displayName}),n.a.createElement("div",{className:"cac_user-box_text"},n.a.createElement(r.b,{to:"/profile/".concat(a.id),className:"cac_user-box_name--link"},n.a.createElement(s.a,{rank:a.rank,className:"cac_user-box_name"},a.displayName)),n.a.createElement(s.a,{rank:a.rank,className:"cac_user-box_ranking"},a.rating||"")))}},97:function(e,a,t){"use strict";function c(e){return function(e){if(Array.isArray(e)){for(var a=0,t=new Array(e.length);a<e.length;a++)t[a]=e[a];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t.d(a,"a",(function(){return c}))}}]);
//# sourceMappingURL=6.de3f7f75.chunk.js.map