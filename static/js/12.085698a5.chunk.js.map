{"version":3,"sources":["Components/popup/index.js","Components/class-box/index.js","Views/attendanceCode/index.js"],"names":["Popup","children","className","TopPopup","onClick","useEffect","timeOut","setTimeout","clearTimeout","ClassBox","classData","showOptions","handleDelete","handleUpdate","title","date","toDate","toDateString","code","description","attendances","length","window","confirm","console","log","AttendanceCode","user","useContext","UserContext","atnContext","AttendanceContext","useState","setCode","showPopup","setShowPopup","isPopoupClosing","setIsPopupClosing","popupClassname","setPopupClassname","classes","ClassContext","fetchPreviousClasses","fetchNextClasses","handleSubmit","e","a","preventDefault","fetching","setClassData","c","validCode","isDataAvailable","to","onSubmit","htmlFor","type","name","id","required","value","onChange","target","isAdmin","nextClasses","map","i","key","previousClasses"],"mappings":"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","file":"static/js/12.085698a5.chunk.js","sourcesContent":["import React, { useEffect } from \"react\";\r\n\r\nimport \"./style.css\";\r\n\r\nconst Popup = ({ children }) => {\r\n  return <div className=\"cac_popup\">{children}</div>;\r\n};\r\n\r\nexport default Popup;\r\n\r\nconst TopPopup = ({ children, className = \"error\", onClick = () => null }) => {\r\n  useEffect(() => {\r\n    const timeOut = setTimeout(() => {\r\n      onClick();\r\n    }, 5000);\r\n    return () => clearTimeout(timeOut);\r\n  });\r\n\r\n  return (\r\n    <div\r\n      onClick={onClick}\r\n      className={`cac_popup-top ${className ? className : \"\"}`}\r\n    >\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport { TopPopup };\r\n","import React from 'react'\r\n\r\nimport './style.css';\r\n\r\nconst ClassBox = ({ classData, showOptions = false, handleDelete = () => null, handleUpdate = () => null }) => {\r\n\r\n  const onDeleteClick = () => {\r\n    if (window.confirm(\"Are you sure you sure?\")) {\r\n      console.log(\"DELETING!!!\");\r\n      handleDelete();\r\n    }\r\n  }\r\n\r\n  const onUpdateClick = () => {\r\n    handleUpdate();\r\n  }\r\n\r\n  return (\r\n    <div className=\"cac_class-box\" >\r\n      <span className=\"cac_class-box_title\">{classData.title}</span>\r\n      <span className=\"cac_class-box_date\">\r\n        {classData.date.toDate().toDateString()}\r\n      </span>\r\n      <span className=\"cac_class-box_code\">{classData.code}</span>\r\n      <p className=\"cac_class-box_description\">\r\n        {classData.description}\r\n      </p>\r\n      <span className=\"cac_class-box_counter\">\r\n        {classData.attendances.length} attendants\r\n      </span>\r\n      {showOptions && (\r\n        <div className=\"cac_class-box_options\">\r\n          <span className=\"cac_class-box_option\" onClick={onUpdateClick}>Update</span>\r\n          <span> | </span>\r\n          <span className=\"cac_class-box_option\" onClick={onDeleteClick}>Delete</span>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ClassBox;","import React, { useState, useContext, useEffect } from \"react\";\r\n// eslint-disable-next-line no-unused-vars\r\nimport { BrowserRouter as Router, Redirect } from \"react-router-dom\";\r\n\r\nimport { FormButton } from \"../../Components/button\";\r\nimport { TopPopup } from \"../../Components/popup\";\r\nimport ClassBox from '../../Components/class-box';\r\n\r\nimport { AttendanceContext } from \"../../Providers/attendanceProvider\";\r\nimport { ClassContext } from \"../../Providers/classProvider\";\r\nimport { UserContext } from \"../../Providers/userProvider\";\r\n\r\nimport \"./style.css\";\r\n\r\nconst AttendanceCode = () => {\r\n  const user = useContext(UserContext);\r\n  const atnContext = useContext(AttendanceContext);\r\n  const [code, setCode] = useState(atnContext.classData.code);\r\n  const [showPopup, setShowPopup] = useState(false);\r\n  const [isPopoupClosing, setIsPopupClosing] = useState(false);\r\n  const [popupClassname, setPopupClassname] = useState(\"\");\r\n\r\n  const classes = useContext(ClassContext);\r\n\r\n  classes.fetchPreviousClasses();\r\n  classes.fetchNextClasses();\r\n\r\n  const handleTextChange = e => {\r\n    setCode(e.target.value);\r\n  };\r\n\r\n  const handleSubmit = async e => {\r\n    e.preventDefault();\r\n    if (!atnContext.fetching) {\r\n      atnContext.setClassData(c => ({ ...c, code: code }));\r\n    }\r\n  };\r\n\r\n  const handleDelete = async code => {\r\n    console.log(code);\r\n  }\r\n\r\n  const handleUpdate = async code => {\r\n    console.log(code);\r\n  }\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    if (\r\n      !atnContext.classData.validCode &&\r\n      code &&\r\n      !atnContext.classData.fetching\r\n    ) {\r\n      setShowPopup(true);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [atnContext.classData.validCode, atnContext.classData.fetching]);\r\n\r\n  const closePopup = () => {\r\n    if (!isPopoupClosing) {\r\n      setIsPopupClosing(true);\r\n      setPopupClassname(\"close\");\r\n      setTimeout(() => {\r\n        setShowPopup(false);\r\n        setPopupClassname(\"\");\r\n        setIsPopupClosing(false);\r\n      }, 300);\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"cac_attendance cac_attendance--not-in-class\">\r\n      {atnContext.classData.isDataAvailable && (\r\n        <Redirect to={`/attendance/${code}`} />\r\n      )}\r\n      {showPopup && (\r\n        <TopPopup className={`${popupClassname} error`} onClick={closePopup}>\r\n          Wrong Code\r\n        </TopPopup>\r\n      )}\r\n      <form className=\"cac_attendance_form\" onSubmit={handleSubmit}>\r\n        <label htmlFor=\"code\" className=\"cac_attendance_label\">\r\n          Enter Code\r\n        </label>\r\n        <input\r\n          type=\"text\"\r\n          name=\"code\"\r\n          id=\"code\"\r\n          className={`cac_attendance_text-area ${\r\n            atnContext.classData.validCode\r\n              ? \"\"\r\n              : \"cac_attendance_text-area--invalid\"\r\n            }`}\r\n          required\r\n          value={code}\r\n          onChange={handleTextChange}\r\n        />\r\n        <FormButton className=\"cac_attendance_form_button \">\r\n          Continue\r\n        </FormButton>\r\n      </form>\r\n      {user.isAdmin && (\r\n        <div className=\"cac_attendance_classes cac_attendance_classes--previous\">\r\n          <span className=\"cac_attendance_classes_title\">Next classes</span>\r\n          {classes.nextClasses.map((c, i) => (\r\n            <ClassBox classData={c} key={i} showOptions={user.isAdmin} handleDelete={() => handleDelete(c.code)} handleUpdate={() => handleUpdate(c.code)} />\r\n          ))}\r\n        </div>\r\n      )}\r\n      <div className=\"cac_attendance_classes cac_attendance_classes--previous\">\r\n        <span className=\"cac_attendance_classes_title\">Previous classes</span>\r\n        {classes.previousClasses.map((c, i) => (\r\n          <ClassBox classData={c} key={i} showOptions={user.isAdmin} handleDelete={() => handleDelete(c.code)} handleUpdate={() => handleUpdate(c.code)} />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AttendanceCode;\r\n"],"sourceRoot":""}