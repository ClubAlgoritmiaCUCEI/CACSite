(this.webpackJsonpcac_site=this.webpackJsonpcac_site||[]).push([[8],{101:function(e,a,t){"use strict";var c=t(0),n=t.n(c),r=t(22),s=t(17),i=t(5),o=t(20),l=t.n(o);t(146);a.a=function(e){var a=e.user,t=e.className,c=e.onClick,o=e.redirect,u=void 0===o||o,d=Object(s.g)();return n.a.createElement("div",{className:"cac_user-box ".concat(t||""," ").concat(u?"":"cac_user-box--redirect"),onClick:c},n.a.createElement("img",{onClick:function(){return u&&d.push("/profile/".concat(a.id))},className:"cac_user-box_photo",src:a.photoURL||l.a,alt:a.displayName}),n.a.createElement("div",{className:"cac_user-box_text"},u?n.a.createElement(i.b,{to:"/profile/".concat(a.id),className:"cac_user-box_name--link"},n.a.createElement(r.a,{rank:a.rank,className:"cac_user-box_name"},a.displayName)):n.a.createElement(r.a,{rank:a.rank,className:"cac_user-box_name"},a.displayName),n.a.createElement(r.a,{rank:a.rank,className:"cac_user-box_ranking"},a.rating||"")))}},103:function(e,a,t){},115:function(e,a,t){"use strict";function c(e){return function(e){if(Array.isArray(e)){for(var a=0,t=new Array(e.length);a<e.length;a++)t[a]=e[a];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t.d(a,"a",(function(){return c}))},124:function(e,a,t){"use strict";var c=t(115),n=t(3),r=t(0),s=t.n(r),i=t(7),o=t(101),l=(t(147),function(e){var a=e.handleUserClick,t=Object(r.useContext)(i.a),c=Object(r.useState)(""),l=Object(n.a)(c,2),u=l[0],d=l[1],m=Object(r.useState)(!0),f=Object(n.a)(m,2),p=f[0],_=f[1],b=Object(r.useState)([]),v=Object(n.a)(b,2),E=v[0],N=v[1],k=Object(r.useState)(),j=Object(n.a)(k,2),O=j[0],C=j[1];return Object(r.useEffect)((function(){if(!t.isCFLoading&&p&&O!==u){_(!1),C(u);var e=u.toLocaleLowerCase();N(t.users.filter((function(a){return a.displayName.toLocaleLowerCase().includes(e)}))),setTimeout((function(){_(!0)}),250)}}),[u,p,O,t]),s.a.createElement("div",{className:"cac_search-user"},s.a.createElement("input",{type:"text",className:"cac_search-user_input",value:u,placeholder:"User name",onChange:function(e){return d(e.target.value)}}),s.a.createElement("div",{className:"cac_search_users-container"},E.map((function(e,t){return s.a.createElement(o.a,{redirect:!1,key:t,user:e,onClick:function(){return a(e)}})}))))}),u=t(9);t(148),a.a=function(e){var a=e.close,t=e.handleConfirm,i=Object(r.useState)([]),d=Object(n.a)(i,2),m=d[0],f=d[1];return Object(r.useEffect)((function(){var e=function(e){"Escape"===e.key&&a()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[a]),s.a.createElement("div",{className:"cac_select-users"},s.a.createElement(l,{handleUserClick:function(e){-1===m.findIndex((function(a){return a.id===e.id}))&&f([].concat(Object(c.a)(m),[e]))}}),s.a.createElement("span",{className:"cac_select-users_title"},"Selected"),s.a.createElement("div",{className:"cac_select-users_users"},m.map((function(e){return s.a.createElement(o.a,{redirect:!1,key:e.id,user:e,onClick:function(){return function(e){f(m.filter((function(a){return a.id!==e.id})))}(e)}})}))),s.a.createElement("div",{className:"cac_select-users_button-container"},s.a.createElement(u.b,{onClick:a,className:"cac_select-users_button cac_select-users_button--cancel"},"Cancel"),s.a.createElement(u.b,{onClick:function(){m.length>0&&(t(m),a())},className:"cac_select-users_button cac_select-users_button ".concat(m.length>0?"":"cac_select-users_button-container--disabled")},"Confirm")))}},146:function(e,a,t){},147:function(e,a,t){},148:function(e,a,t){},149:function(e,a,t){},188:function(e,a,t){"use strict";t.r(a);var c=t(115),n=t(1),r=t(4),s=t.n(r),i=t(3),o=t(0),l=t.n(o),u=t(17),d=t(6),m=t(33),f=t(7),p=t(101),_=t(9),b=t(99),v=t(124);t(149);a.default=function(e){var a=Object(o.useContext)(m.a),t=Object(o.useContext)(f.c),r=Object(o.useContext)(f.a).usersMap,E=Object(o.useState)(!1),N=Object(i.a)(E,2),k=N[0],j=N[1],O=Object(o.useState)(!1),C=Object(i.a)(O,2),y=C[0],h=C[1],x=Object(o.useState)(!1),g=Object(i.a)(x,2),w=g[0],S=g[1],A=Object(o.useState)({open:!1,description:"",type:""}),D=Object(i.a)(A,2),L=D[0],U=D[1],F=e.preview,T=Object(u.g)(),I=F?e.classData:a.classData,J=(e.match.params||I).code;Object(o.useEffect)((function(){!F&&t.logged&&!t.isLoading&&I.isDataAvailable&&!y&&I.active&&function(){var e;s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(e=d.d.doc("class/".concat(J)),void 0!==I.attendances.find((function(e){return e.id===t.uid}))){a.next=4;break}return a.next=4,s.a.awrap(e.update({attendances:d.c.firestore.FieldValue.arrayUnion({id:t.uid,displayName:t.displayName})}));case 4:h(!0);case 5:case"end":return a.stop()}}))}()}),[y,t,I,J,F]),Object(o.useEffect)((function(){F||(J!==I.code?a.setClassData((function(e){return Object(n.a)({},e,{code:J})})):I.validCode||j(!0))}),[J,t,I,a,F]);return Object(o.useEffect)((function(){I.isDataAvailable&&!I.active&&U({open:!0,type:"error",description:"Class ended"})}),[I.isDataAvailable,I.active]),l.a.createElement("div",{className:"cac_attendance cac_attendance--in-class"},L.open&&l.a.createElement(b.a,{onClick:function(){return U({open:!1})},className:L.type},L.description),k&&l.a.createElement(u.a,{to:"/attendance"}),w&&l.a.createElement(b.b,null,l.a.createElement(v.a,{close:function(){return S(!1)},handleConfirm:function(e){var a,t;return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return S(!1),t=d.d.doc("class/".concat(J)),n.next=4,s.a.awrap(t.update({attendances:(a=d.c.firestore.FieldValue).arrayUnion.apply(a,Object(c.a)(e.map((function(e){return{id:e.id,displayName:e.displayName}}))))}));case 4:case"end":return n.stop()}}))}})),(I.isDataAvailable||F)&&l.a.createElement("div",{className:"cac_attendance_class"},l.a.createElement("h3",{className:"cac_attendance_title"},I.title),l.a.createElement("span",{className:"cac_attendance_date"},F?I.date:I.date.toDate().toDateString()),l.a.createElement("div",{className:"cac_attendance_code-container"},l.a.createElement("span",{className:"cac_attendance_code-title"},"Code"),l.a.createElement("span",{className:"cac_attendance_code-code"},I.code)),l.a.createElement("div",{className:"cac_attendance_speakers-container"},l.a.createElement("span",{className:"cac_attendance_speakers-title"},"Speakers"),I.speakers.map((function(e,a){return l.a.createElement(p.a,{key:a,className:"cac_attendance_speaker_user-box",user:r[e.id]||e})}))),l.a.createElement("div",{className:"cac_attendance_description-container"},l.a.createElement("p",{className:"cac_attendance_description-title"},"Description"),l.a.createElement("p",{className:"cac_attendance_description-text"},I.description)),l.a.createElement("div",{className:"cac_attendance_attendant-container"},I.attendances.map((function(e,a){return l.a.createElement(p.a,{key:a,className:"cac_attendance_attendant",user:r[e.id]||e})})))),l.a.createElement("div",{className:"cac_attendance_buttons"},l.a.createElement(_.b,{className:"cac_attendance_button cac_attendance_add",onClick:function(){console.log(a),T.push("/attendance"),a.setClassData({isDataAvailable:!1,code:""})}},"Change"),t.isAdmin&&l.a.createElement(l.a.Fragment,null,l.a.createElement(_.b,{className:"cac_attendance_button cac_attendance_end",onClick:function(){var e;return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(F||!I.active){a.next=4;break}return e=d.d.doc("class/".concat(J)),a.next=4,s.a.awrap(e.update({active:!1}));case 4:case"end":return a.stop()}}))}},"End class"),l.a.createElement(_.b,{className:"cac_attendance_button cac_attendance_add",onClick:function(){F||S(!0)}},"Add people"))))}},99:function(e,a,t){"use strict";t.d(a,"a",(function(){return r}));var c=t(0),n=t.n(c);t(103);a.b=function(e){var a=e.children;return n.a.createElement("div",{className:"cac_popup"},a)};var r=function(e){var a=e.children,t=e.className,r=void 0===t?"error":t,s=e.onClick,i=void 0===s?function(){return null}:s;return Object(c.useEffect)((function(){var e=setTimeout((function(){i()}),5e3);return function(){return clearTimeout(e)}})),n.a.createElement("div",{onClick:i,className:"cac_popup-top ".concat(r||"")},a)}}}]);
//# sourceMappingURL=8.e279d1ce.chunk.js.map