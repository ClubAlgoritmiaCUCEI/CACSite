(this.webpackJsonpcac_site=this.webpackJsonpcac_site||[]).push([[7],{482:function(e,t,a){},503:function(e,t,a){"use strict";a.r(t);var c=a(3),n=a.n(c),r=a(4),o=a(0),s=a.n(o),l=a(5),i=a(25),u=a(9),p=a(28),m=a(8),d=a(74),f=a(83);a(482);t.default=function(){var e=Object(o.useContext)(i.a),t=Object(o.useContext)(u.c),a=Object(o.useContext)(u.a),c=Object(o.useState)(""),_=Object(r.a)(c,2),b=_[0],v=_[1],h=Object(o.useState)(""),g=Object(r.a)(h,2),y=g[0],E=g[1],O=Object(o.useState)(!1),N=Object(r.a)(O,2),k=N[0],j=N[1],x=Object(o.useState)(!1),w=Object(r.a)(x,2),C=w[0],S=w[1],R=Object(o.useState)({visible:!1,content:"",type:""}),L=Object(r.a)(R,2),P=L[0],V=L[1],M=Object(o.useState)(null),D=Object(r.a)(M,2),U=D[0],F=D[1],A=Object(o.useState)(!1),J=Object(r.a)(A,2),H=J[0],T=J[1],B=Object(o.useRef)(null);console.log(t),Object(o.useEffect)((function(){e.fetch.public()}),[e.fetch]);var I=function(){E(""),v(""),j("")};return Object(p.a)(B,(function(){return T(!1)})),s.a.createElement("div",{className:"cac_public"},H&&s.a.createElement("div",{className:"cac_public_background-black"},s.a.createElement("div",{className:"cac_public_post-container",ref:B},s.a.createElement(d.a,{allUsers:a.usersMap,className:"cac_public_post",data:e.posts.public.find((function(e){return e.id===U})),cropContent:!1,showCommentaries:!0,user:t,from:"public"}))),P.visible&&s.a.createElement(f.a,{className:P.type,onClick:function(){return V({visible:!1})}},P.content),k?s.a.createElement("div",{className:"cac_public_create cac_public_create--creating"},s.a.createElement("textarea",{className:"cac_public_create_text-area cac_public_create_text-area--title",value:y,placeholder:"Title",onChange:function(e){return E(e.target.value)}}),s.a.createElement("textarea",{className:"cac_public_create_text-area cac_public_create_text-area--content",value:b,placeholder:"Content (Markdown)",onChange:function(e){return v(e.target.value)}}),s.a.createElement(m.b,{className:"cac_public_create_button cac_public_create_button--post ".concat(C||""===y||""===b?"cac_public_create_button--disabled":""),onClick:function(){t.logged?C||""===y||""===b||function(){var e;n.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return S(!0),e={title:y,content:b,type:"public-post",comments:[],likesList:[],likesCounter:0,author:{id:t.uid,displayName:t.displayName},timestamp:l.c.firestore.FieldValue.serverTimestamp(),key:Date.now()},a.prev=2,a.next=5,n.a.awrap(l.d.collection("public").add(e));case 5:V({visible:!0,content:"Post published succesfully",type:"success"}),I(),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(2),console.error(a.t0),V({visible:!0,content:"Error publishing post",type:"error"});case 13:S(!1);case 14:case"end":return a.stop()}}),null,null,[[2,9]])}():V({visible:!0,type:"error",content:"You need to sign in to post"})}},"Post"),s.a.createElement(m.b,{className:"cac_public_create_button cac_public_create_button--cancel",onClick:I},"Cancel")):s.a.createElement("div",{className:"cac_public_create cac_public_create--default"},s.a.createElement("textarea",{className:"cac_public_create_text-area cac_public_create_text-area--title",value:"",onChange:function(e){j(!0),E(e.target.value)},onClick:function(){return j(!0)},placeholder:"Create Post"}),s.a.createElement(m.b,{className:"cac_public_create_button  cac_public_create_button--post cac_public_create_button--disabled"},"Post")),s.a.createElement("div",{className:"cac_public_posts"},!t.isLoading&&e.posts.public.map((function(e,c){return s.a.createElement(d.a,{user:t,key:c,data:e,allUsers:a.usersMap,cropContent:!0,onClick:function(){return t=e.id,F(t),void T(!0);var t},showCommentaries:!1,from:"public"})}))))}},69:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return o}));var c=function(e){switch(e){case 0:return"January";case 1:return"February";case 2:return"March";case 3:return"April";case 4:return"May";case 5:return"June";case 6:return"July";case 7:return"August";case 8:return"September";case 9:return"October";case 10:return"November";case 11:return"December";default:return null}},n=function(e){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=a.length,n=0;n<e;n++)t+=a[Math.floor(Math.random()*c)];return t},r=/<br>|<\/br>|<br\/>/gi,o=function(e){return e.replace(r,"")}},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){"use strict";var c=a(3),n=a.n(c),r=a(4),o=a(0),s=a.n(o),l=a(5),i=a(7),u=a(78),p=a.n(u),m=a(79),d=a.n(m),f=a(70),_=a.n(f),b=a(510),v=a(501),h=(a(71),function(e){var t=e.language,a=void 0===t?null:t,c=e.value;return s.a.createElement(b.a,{language:a,style:v.a},c)}),g=a(17),y=a(24),E=a.n(y),O=(a(72),function(e){var t=e.author,a=e.date,c=e.content;return s.a.createElement("div",{className:"cac_commentary"},s.a.createElement("div",{className:"cac_commentary_heading"},s.a.createElement("img",{src:t&&t.photoURL||E.a,alt:t?t.displayName:"",className:"cac_commentary_photo"}),s.a.createElement("div",{className:"cac_commentary_heading_text"},s.a.createElement(g.a,{className:"cac_commentary_name",rank:t?t.rank:null},t?t.displayName:""),s.a.createElement(_.a,{className:"cac_post_date",date:a.toDate()}))),s.a.createElement("p",{className:"cac_commentary_content"},c))}),N=a(8);function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(e[c]=a[c])}return e}).apply(this,arguments)}function j(e,t){if(null==e)return{};var a,c,n=function(e,t){if(null==e)return{};var a,c,n={},r=Object.keys(e);for(c=0;c<r.length;c++)a=r[c],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(c=0;c<r.length;c++)a=r[c],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var x=s.a.createElement("title",null,"ionicons-v5-f"),w=function(e){var t=e.svgRef,a=e.title,c=j(e,["svgRef","title"]);return s.a.createElement("svg",k({width:512,height:512,viewBox:"0 0 512 512",ref:t},c),void 0===a?x:a?s.a.createElement("title",null,a):null,s.a.createElement("path",{d:"M352.92,80C288,80,256,144,256,144s-32-64-96.92-64C106.32,80,64.54,124.14,64,176.81c-1.1,109.33,86.73,187.08,183,252.42a16,16,0,0,0,18,0c96.26-65.34,184.09-143.09,183-252.42C447.46,124.14,405.68,80,352.92,80Z",style:{fill:"auto",stroke:"auto",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:32}}))},C=s.a.forwardRef((function(e,t){return s.a.createElement(w,k({svgRef:t},e))}));a.p;function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(e[c]=a[c])}return e}).apply(this,arguments)}function R(e,t){if(null==e)return{};var a,c,n=function(e,t){if(null==e)return{};var a,c,n={},r=Object.keys(e);for(c=0;c<r.length;c++)a=r[c],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(c=0;c<r.length;c++)a=r[c],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var L=s.a.createElement("title",null,"ionicons-v5-l"),P=function(e){var t=e.svgRef,a=e.title,c=R(e,["svgRef","title"]);return s.a.createElement("svg",S({width:512,height:512,viewBox:"0 0 512 512",ref:t},c),void 0===a?L:a?s.a.createElement("title",null,a):null,s.a.createElement("path",{d:"M408,64H104a56.16,56.16,0,0,0-56,56V312a56.16,56.16,0,0,0,56,56h40v80l93.72-78.14a8,8,0,0,1,5.13-1.86H408a56.16,56.16,0,0,0,56-56V120A56.16,56.16,0,0,0,408,64Z",style:{fill:"auto",stroke:"auto",strokeLinejoin:"round",strokeWidth:32}}))},V=s.a.forwardRef((function(e,t){return s.a.createElement(P,S({svgRef:t},e))}));a.p;function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(e[c]=a[c])}return e}).apply(this,arguments)}function D(e,t){if(null==e)return{};var a,c,n=function(e,t){if(null==e)return{};var a,c,n={},r=Object.keys(e);for(c=0;c<r.length;c++)a=r[c],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(c=0;c<r.length;c++)a=r[c],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var U=s.a.createElement("title",null,"ionicons-v5-h"),F=function(e){var t=e.svgRef,a=e.title,c=D(e,["svgRef","title"]);return s.a.createElement("svg",M({width:512,height:512,viewBox:"0 0 512 512",ref:t},c),void 0===a?U:a?s.a.createElement("title",null,a):null,s.a.createElement("path",{d:"M352,48H160a48,48,0,0,0-48,48V464L256,336,400,464V96A48,48,0,0,0,352,48Z",style:{fill:"auto",stroke:"auto",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:32}}))},A=s.a.forwardRef((function(e,t){return s.a.createElement(F,M({svgRef:t},e))})),J=(a.p,a(69)),H=(a(73),a(82),d()({isValidNode:function(e){return"script"!==e.type&&"break"!==e.type}}));t.a=function(e){var t=e.user,a=e.from,c=void 0===a?"posts":a,u=e.showAuthor,m=void 0===u||u,d=e.enableLink,f=void 0===d||d,b=e.data,v=e.allUsers,y=e.preview,k=void 0!==y&&y,j=e.cropContent,x=void 0!==j&&j,w=e.showCommentaries,S=void 0!==w&&w,R=e.onClick,L=void 0===R?function(){return null}:R,P=b.author;P=v[P.id]||P;var M=Object(o.useState)(!1),D=Object(r.a)(M,2),U=D[0],F=D[1],T=Object(o.useState)(""),B=Object(r.a)(T,2),I=B[0],W=B[1],Z=!k&&t.logged&&b.likesList.includes(t.uid),Y=Object(o.useState)(!k&&t.logged&&t.saved.includes(b.id)),q=Object(r.a)(Y,2),z=q[0],G=q[1];return s.a.createElement("div",{className:"cac_post ".concat(x?"cac_post--crop":""),onClick:L},s.a.createElement("div",{className:"cac_post_heading"},m&&s.a.createElement("img",{src:P.photoURL||E.a,className:"cac_post_heading_photo",alt:P.displayName}),s.a.createElement("div",{className:"cac_post_text-container"},f?s.a.createElement(i.b,{to:"/".concat(c,"/").concat(b.id),className:"cac_post_title cac_post_title--link"},b.title):s.a.createElement("span",{className:"cac_post_title"},b.title),m&&s.a.createElement(g.a,{className:"cac_post_author",rank:P.rank},P.displayName),k?s.a.createElement("span",{className:"cac_post_date"},b.date):s.a.createElement(_.a,{className:"cac_post_date",live:!1,date:b.timestamp?b.timestamp.toDate():new Date})),s.a.createElement("div",{className:"cac_post_icons"})),s.a.createElement(p.a,{className:"cac_post_content markdown-body ".concat(x?"cac_post_content--crop":""),source:Object(J.c)(b.content),renderers:{code:h},escapeHtml:!1,astPlugins:[H]}),s.a.createElement("div",{className:"cac_post_interaction"},s.a.createElement("div",{className:"cac_post_interaction-box",onClick:function(e){e.stopPropagation();!k&&t.logged?function(){var e;n.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(e=l.d.doc("".concat(c,"/").concat(b.id)),Z){a.next=6;break}return a.next=4,n.a.awrap(e.update({likesList:l.c.firestore.FieldValue.arrayUnion(t.uid)}));case 4:a.next=8;break;case 6:return a.next=8,n.a.awrap(e.update({likesList:l.c.firestore.FieldValue.arrayRemove(t.uid)}));case 8:case"end":return a.stop()}}))}():alert("You need to sign in to like posts")}},s.a.createElement("span",{className:"cac_post_interaction-counter"},b.likesList.length),s.a.createElement(C,{className:"cac_post_icon cac_post_heart ".concat(Z?"cac_post_heart--filled":"")}),s.a.createElement("span",{className:"cac_post_interaction-label"},"Like")),s.a.createElement("div",{className:"cac_post_interaction-box cac_post_interaction-box--comment"},s.a.createElement("span",{className:"cac_post_interaction-counter"},b.comments.length),s.a.createElement(V,{className:"cac_post_icon cac_post_comment"}),s.a.createElement("span",{className:"cac_post_interaction-label"},"Comment")),s.a.createElement("div",{className:"cac_post_interaction-box",onClick:function(e){e.stopPropagation();!k&&t.logged?function(){var e;n.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(e=l.d.doc("users/".concat(t.uid)),G(!z),z){a.next=7;break}return a.next=5,n.a.awrap(e.update({saved:l.c.firestore.FieldValue.arrayUnion(b.id)}));case 5:a.next=9;break;case 7:return a.next=9,n.a.awrap(e.update({saved:l.c.firestore.FieldValue.arrayRemove(b.id)}));case 9:case"end":return a.stop()}}))}():alert("you need to sign in to save posts")}},s.a.createElement(A,{className:"cac_post_icon cac_post_bookmark ".concat(z?"cac_post_bookmark--filled":"")}),s.a.createElement("span",{className:"cac_post_interaction-label"},"Save"))),S&&s.a.createElement("div",{className:"cac_post_commentaries-section"},t.logged&&s.a.createElement("div",{className:"cac_post_create-commentary"},s.a.createElement("textarea",{className:"cac_post_create-commentary_textarea",value:I,onChange:function(e){return W(e.target.value)}}),s.a.createElement(N.b,{className:"cac_poist_create-commentary_button",onClick:function(){!U&&I&&function(){var e,a;n.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return F(!0),e=l.d.doc("".concat(c,"/").concat(b.id)),a={author:t.uid,content:I,date:new Date},r.next=5,n.a.awrap(e.update({comments:l.c.firestore.FieldValue.arrayUnion(a)}));case 5:F(!1),W("");case 7:case"end":return r.stop()}}))}()}},"Comment")),s.a.createElement("div",{className:"cac_post_commentaries"},b.comments.sort((function(e,t){return t.date.toDate()-e.date.toDate()})).map((function(e,t){var a=e.author,c=e.content,n=e.date;return s.a.createElement(O,{key:t,author:v[a],content:c,date:n})})))))}},80:function(e,t){},83:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var c=a(0),n=a.n(c);a(88);t.b=function(e){var t=e.children;return n.a.createElement("div",{className:"cac_popup"},t)};var r=function(e){var t=e.children,a=e.className,r=e.onClick;return Object(c.useEffect)((function(){var e=setTimeout((function(){r()}),5e3);return function(){return clearTimeout(e)}})),n.a.createElement("div",{onClick:r,className:"cac_popup-top ".concat(a||"")},t)}},88:function(e,t,a){}}]);
//# sourceMappingURL=7.5485db01.chunk.js.map