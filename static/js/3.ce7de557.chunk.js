(this.webpackJsonpcac_site=this.webpackJsonpcac_site||[]).push([[3],{526:function(e,t,a){},527:function(e,t,a){},553:function(e,t,a){"use strict";a.r(t);var c=a(3),n=a(0),s=a.n(n),o=a(16),r=a(36),l=a(42),u=a(33),i=a(7),m=a(148),_=a(4),p=a.n(_),b=a(6),d=a(112),f=(a(526),a(9)),v=function(e){var t=e.type,a=e.user,o=Object(n.useState)(!1),r=Object(c.a)(o,2),l=r[0],i=r[1],m=Object(n.useState)(""),_=Object(c.a)(m,2),v=_[0],h=_[1],j=Object(n.useState)(""),O=Object(c.a)(j,2),E=O[0],k=O[1],C=Object(n.useState)(!1),x=Object(c.a)(C,2),w=x[0],y=x[1],g=Object(n.useContext)(u.a),N=function(){h(""),k(""),i(!1)};return s.a.createElement("div",{className:"cac_create_post_small ".concat(l?"editing":"not-editing")},l?s.a.createElement(s.a.Fragment,null,s.a.createElement("textarea",{placeholder:"Title",value:E,onChange:function(e){return k(e.target.value)},className:"cac_create_post_small_textarea cac_create_post_small_textarea--title"}),s.a.createElement("textarea",{placeholder:"Content (Markdown)",value:v,onChange:function(e){return h(e.target.value)},className:"cac_create_post_small_textarea cac_create_post_small_textarea--content"}),s.a.createElement(f.b,{className:"cac_create_post_small_button cac_create_post_small_button--post ".concat(w||""===E||""===v?"cac_create_post_small_button--disabled":""),onClick:function(){w||(y(!0),function(){var e;p.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return e={title:E,content:Object(d.a)(v),type:t,comments:[],likesList:[],author:{id:a.uid,displayName:a.displayName},createdAt:b.c.firestore.FieldValue.serverTimestamp(),timestamp:b.c.firestore.FieldValue.serverTimestamp(),key:Date.now()},c.prev=1,c.next=4,p.a.awrap(b.d.collection("test-posts").add(e));case 4:N(),g.fetch(t,!0),c.next=11;break;case 8:c.prev=8,c.t0=c.catch(1),console.error(c.t0);case 11:y(!1);case 12:case"end":return c.stop()}}),null,null,[[1,8]])}())}},"Post"),s.a.createElement(f.b,{className:"cac_create_post_small_button cac_create_post_small_button--cancel",onClick:N},"Cancel")):s.a.createElement(s.a.Fragment,null,s.a.createElement("textarea",{className:"cac_create_post_small_textarea",value:"",placeholder:"Create Post",onClick:function(){return i(!0)},onChange:function(e){i(!0),k(e.target.value)}}),s.a.createElement(f.b,{className:"cac_create_post_small_button cac_create_post_small_button--post ".concat(w||""===E||""===v?"cac_create_post_small_button--disabled":"")},"Post")))};a(527),t.default=function(e){var t=e.className,a=void 0===t?"":t,_=e.Fallback,p=e.from,b=e.type,d=e.showAuthor,f=void 0!==d&&d,h=e.enableCreate,j=void 0!==h&&h,O=e.enablePreview,E=void 0===O||O,k=Object(n.useContext)(u.a),C=Object(n.useContext)(i.c),x=Object(n.useContext)(i.a),w=Object(o.g)(),y=Object(n.useState)(!1),g=Object(c.a)(y,2),N=g[0],S=g[1],F=Object(n.useState)({}),A=Object(c.a)(F,2),L=A[0],M=A[1],P=Object(n.useRef)(null),D=Object(r.useMediaQuery)({query:"(max-width: 800px)"});Object(l.a)(P,(function(){return S(!1)})),Object(n.useEffect)((function(){k.status.IDB&&k.fetch(b)}),[b,k.status.IDB]);return Object(n.useEffect)((function(){var e=function(e){"Escape"===e.key&&S(!1)};return N?(document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}):function(){return null}}),[N]),s.a.createElement("div",{className:"cac_posts ".concat(a)},j&&s.a.createElement(v,{type:b,user:C}),!C.isLoading&&k.status[b]?k.posts[b].map((function(e,t){return s.a.createElement(m.a,{user:C,key:t,showAuthor:f,data:e,allUsers:x.usersMap,cropContent:!0,onClick:function(){return function(e){E&&!D?(console.log("click"),M(e),S(!0)):w.push("/".concat(p,"/").concat(e.id))}(e)},showCommentaries:!1,from:p})})):s.a.createElement(_,null),N&&s.a.createElement("div",{className:"cac_posts_background-black"},s.a.createElement("div",{className:"cac_post-open_container",ref:P},s.a.createElement(m.a,{user:C,key:L.id,showAuthor:f,className:"cac_posts_post-open",data:L,allUsers:x.usersMap,cropContent:!1,showCommentaries:!0,from:p}))))}}}]);
//# sourceMappingURL=3.ce7de557.chunk.js.map