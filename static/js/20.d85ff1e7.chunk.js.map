{"version":3,"sources":["Components/single-post/weekly-post/index.js"],"names":["WeeklyPost","match","posts","useContext","PostsContext","user","UserContext","allUsers","AllUsersContext","useState","postData","setPostData","id","params","useEffect","fetch","weeklyProblems","destroyerFunction","status","post","find","p","a","async","postsRef","firestore","doc","onSnapshot","snapshot","data","e","console","error","fetchPost","isLoading","enableLink","showAuthor","usersMap","className","from","cropContent","showCommentaries"],"mappings":"uLA2DeA,UAlDI,SAAC,GAAe,IAAbC,EAAY,EAAZA,MACdC,EAAQC,qBAAWC,KACnBC,EAAOF,qBAAWG,KAClBC,EAAWJ,qBAAWK,KAHI,EAIAC,oBAAS,GAJT,mBAIzBC,EAJyB,KAIfC,EAJe,KAKxBC,EAAOX,EAAMY,OAAbD,GA0BR,OAxBAE,qBAAU,WACRZ,EAAMa,MAAMC,mBACX,CAACd,EAAMa,QAEVD,qBAAU,WACR,IAAIG,EAAoB,kBAAM,MAW9B,GAAIf,EAAMgB,OAAOF,eAAgB,CAC/B,IAAMG,EAAOjB,EAAMA,MAAMc,eAAeI,MAAK,SAAAC,GAAC,OAAIA,EAAET,KAAOA,KACvDO,EAAMR,EAAYQ,GAZN,mBAAAG,EAAAC,OAAA,gDACVC,EAAWC,IAAUC,IAAV,0BAAiCd,IAClD,IACEK,EAAoBO,EAASG,YAAW,SAAMC,GAAN,SAAAN,EAAAC,OAAA,gDACtCZ,EAAYiB,EAASC,QADiB,wCAGxC,MAAOC,GACPC,QAAQC,MAAMF,GAPA,qCAaXG,GAEP,OAAOhB,IACN,CAACL,EAAIV,IAGN,oCACGQ,IAAaL,EAAK6B,WACjB,kBAAC,IAAD,CACEC,YAAY,EACZC,YAAY,EACZ7B,SAAUA,EAAS8B,SACnBC,UAAU,gBACVT,KAAMnB,EACN6B,KAAK,kBACLC,aAAa,EACbC,kBAAkB,EAClBpC,KAAMA","file":"static/js/20.d85ff1e7.chunk.js","sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\n\r\nimport { firestore } from \"../../../firebase\";\r\n\r\nimport { PostsContext } from \"../../../Providers/postsProvider\";\r\nimport { UserContext, AllUsersContext } from \"../../../Providers/userProvider\";\r\n\r\nimport Post from \"../../post\";\r\n\r\nconst WeeklyPost = ({ match }) => {\r\n  const posts = useContext(PostsContext);\r\n  const user = useContext(UserContext);\r\n  const allUsers = useContext(AllUsersContext);\r\n  const [postData, setPostData] = useState(false);\r\n  const { id } = match.params;\r\n\r\n  useEffect(() => {\r\n    posts.fetch.weeklyProblems();\r\n  }, [posts.fetch]);\r\n\r\n  useEffect(() => {\r\n    let destroyerFunction = () => null;\r\n    const fetchPost = async () => {\r\n      const postsRef = firestore.doc(`weekly-problems/${id}`);\r\n      try {\r\n        destroyerFunction = postsRef.onSnapshot(async snapshot => {\r\n          setPostData(snapshot.data());\r\n        });\r\n      } catch (e) {\r\n        console.error(e);\r\n      }\r\n    };\r\n    if (posts.status.weeklyProblems) {\r\n      const post = posts.posts.weeklyProblems.find(p => p.id === id);\r\n      if (post) setPostData(post);\r\n      else fetchPost();\r\n    }\r\n    return destroyerFunction;\r\n  }, [id, posts]);\r\n\r\n  return (\r\n    <>\r\n      {postData && !user.isLoading && (\r\n        <Post\r\n          enableLink={false}\r\n          showAuthor={false}\r\n          allUsers={allUsers.usersMap}\r\n          className=\"cac_home_post\"\r\n          data={postData}\r\n          from=\"weekly-problems\"\r\n          cropContent={false}\r\n          showCommentaries={true}\r\n          user={user}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default WeeklyPost;\r\n"],"sourceRoot":""}