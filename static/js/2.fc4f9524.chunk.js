(this.webpackJsonpcac_site=this.webpackJsonpcac_site||[]).push([[2],{120:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return c})),a.d(t,"d",(function(){return r})),a.d(t,"a",(function(){return o}));var n=function(e){switch(e){case 0:return"January";case 1:return"February";case 2:return"March";case 3:return"April";case 4:return"May";case 5:return"June";case 6:return"July";case 7:return"August";case 8:return"September";case 9:return"October";case 10:return"November";case 11:return"December";default:return null}},c=function(e){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=a.length,c=0;c<e;c++)t+=a[Math.floor(Math.random()*n)];return t},r=function(e){return e.replace(/<br>|<\/br>|<br\/>/gi,"")},o=function(e){for(var t='<span style="'.concat("display:block;text-align:center",'"> $$'),a=new RegExp("\\$\\$(?!\\s*</span>)\\s*([^$]*\\S)\\s*\\$\\$(?!</span>)","gi"),n=e;;){var c=a.exec(n);if(!c)break;console.log(c);var r=n.slice(0,c.index),o=n.slice(c.index+c[0].length);n=r+t+c[1]+"$$ </span>"+o}return n}},148:function(e,t,a){"use strict";var n=a(1),c=a(4),r=a.n(c),o=a(3),s=a(0),l=a.n(s),i=a(6),u=a(16),m=a(5),d=a(150),p=a.n(d),f=a(160),v=a.n(f),_=a(551),g=a(549),h=(a(319),function(e){var t=e.language,a=void 0===t?null:t,n=e.value;return l.a.createElement(_.a,{language:a,style:g.a},n)}),b=a(513),y=a.n(b),E=a(518),O=a.n(E),k=a(120),N=(a(521),v()({isValidNode:function(e){return"script"!==e.type&&"break"!==e.type}})),j=function(e){var t=e.content,a=void 0===t?"":t,n=e.className,c=void 0===n?"":n;return Object(s.useMemo)((function(){var e=Object(k.a)(a),t={className:"cac_markdown ".concat(c),source:Object(k.d)(e),plugins:[O.a],renderers:{code:h,math:function(e){return l.a.createElement(y.a.Node,{formula:e.value})},inlineMath:function(e){return l.a.createElement(y.a.Node,{inline:!0,formula:e.value})}},escapeHtml:!1,astPlugins:[N]};return l.a.createElement(y.a.Provider,{input:"tex"},l.a.createElement(p.a,t))}),[a,c])},w=a(191),x=a.n(w),R=a(23),S=a(28),C=a(21),P=a.n(C),L=(a(524),a(35),function(e){var t=e.handleDelete,a=void 0===t?function(){return console.log("?>?")}:t,n=e.user,c=e.author,r=e.date,o=e.content;return l.a.createElement("div",{className:"cac_commentary"},l.a.createElement("div",{className:"cac_commentary_heading"},l.a.createElement("img",{src:c&&c.photoURL||P.a,alt:c?c.displayName:"",className:"cac_commentary_photo"}),l.a.createElement("div",{className:"cac_commentary_heading_text"},l.a.createElement(m.b,{to:"/profile/".concat(c.id),className:"cac_commentary_name--link"},l.a.createElement(R.a,{className:"cac_commentary_name",rank:c?c.rank:null},c?c.displayName:"")),l.a.createElement(x.a,{className:"cac_post_date",date:r.toDate()})),l.a.createElement(S.a,{handleDelete:a,className:"cac_commentary_options",user:n,author:c})),l.a.createElement(j,{content:o,className:"cac_commentary_content"}))}),D=function(){return l.a.createElement("div",{className:"cac_commentary cac_loading-commentary"},l.a.createElement("div",{className:"gradient cac_loading-commentary_photo"}),l.a.createElement("div",{className:"gradient cac_loading-commentary_name"}),l.a.createElement("div",{className:"gradient cac_loading_commentary_content"}))},V=a(9),F=a(546);function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function $(e,t){if(null==e)return{};var a,n,c=function(e,t){if(null==e)return{};var a,n,c={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(c[a]=e[a]);return c}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(c[a]=e[a])}return c}var A=l.a.createElement("title",null,"ionicons-v5-f"),U=function(e){var t=e.svgRef,a=e.title,n=$(e,["svgRef","title"]);return l.a.createElement("svg",M({width:512,height:512,viewBox:"0 0 512 512",ref:t},n),void 0===a?A:a?l.a.createElement("title",null,a):null,l.a.createElement("path",{d:"M352.92,80C288,80,256,144,256,144s-32-64-96.92-64C106.32,80,64.54,124.14,64,176.81c-1.1,109.33,86.73,187.08,183,252.42a16,16,0,0,0,18,0c96.26-65.34,184.09-143.09,183-252.42C447.46,124.14,405.68,80,352.92,80Z",style:{fill:"auto",stroke:"auto",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:32}}))},H=l.a.forwardRef((function(e,t){return l.a.createElement(U,M({svgRef:t},e))}));a.p;function J(){return(J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function B(e,t){if(null==e)return{};var a,n,c=function(e,t){if(null==e)return{};var a,n,c={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(c[a]=e[a]);return c}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(c[a]=e[a])}return c}var I=l.a.createElement("title",null,"ionicons-v5-l"),W=function(e){var t=e.svgRef,a=e.title,n=B(e,["svgRef","title"]);return l.a.createElement("svg",J({width:512,height:512,viewBox:"0 0 512 512",ref:t},n),void 0===a?I:a?l.a.createElement("title",null,a):null,l.a.createElement("path",{d:"M408,64H104a56.16,56.16,0,0,0-56,56V312a56.16,56.16,0,0,0,56,56h40v80l93.72-78.14a8,8,0,0,1,5.13-1.86H408a56.16,56.16,0,0,0,56-56V120A56.16,56.16,0,0,0,408,64Z",style:{fill:"auto",stroke:"auto",strokeLinejoin:"round",strokeWidth:32}}))},Z=l.a.forwardRef((function(e,t){return l.a.createElement(W,J({svgRef:t},e))}));a.p;function Y(){return(Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function q(e,t){if(null==e)return{};var a,n,c=function(e,t){if(null==e)return{};var a,n,c={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(c[a]=e[a]);return c}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(c[a]=e[a])}return c}var z=l.a.createElement("title",null,"ionicons-v5-h"),G=function(e){var t=e.svgRef,a=e.title,n=q(e,["svgRef","title"]);return l.a.createElement("svg",Y({width:512,height:512,viewBox:"0 0 512 512",ref:t},n),void 0===a?z:a?l.a.createElement("title",null,a):null,l.a.createElement("path",{d:"M352,48H160a48,48,0,0,0-48,48V464L256,336,400,464V96A48,48,0,0,0,352,48Z",style:{fill:"auto",stroke:"auto",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:32}}))},K=l.a.forwardRef((function(e,t){return l.a.createElement(G,Y({svgRef:t},e))}));a.p,a(525),a(526),t.a=function(e){var t,a=e.user,c=e.from,d=void 0===c?"posts":c,p=e.showAuthor,f=void 0===p||p,v=e.enableLink,_=void 0===v||v,g=e.data,h=e.allUsers,b=e.preview,y=void 0!==b&&b,E=e.cropContent,O=void 0!==E&&E,k=e.showCommentaries,N=void 0!==k&&k,w=e.onClick,C=void 0===w?function(){return null}:w,M=e.parentHandleDelete,$=void 0===M?function(){return null}:M;t=h[g.author.id]||t;var A=Object(s.useState)(""),U=Object(o.a)(A,2),J=U[0],B=U[1],I=Object(s.useState)(!y&&a.logged&&a.saved.includes(g.id)),W=Object(o.a)(I,2),Y=W[0],q=W[1],z=Object(u.g)(),G=Object(s.useState)(!y&&a.logged&&g.likesList.includes(a.uid)),Q=Object(o.a)(G,2),T=Q[0],X=Q[1],ee=Object(s.useState)(y?0:g.likesList.length),te=Object(o.a)(ee,2),ae=te[0],ne=te[1],ce=Object(s.useState)([]),re=Object(o.a)(ce,2),oe=re[0],se=re[1],le=Object(s.useState)(!0),ie=Object(o.a)(le,2),ue=ie[0],me=ie[1],de=Object(s.useState)(!1),pe=Object(o.a)(de,2),fe=pe[0],ve=pe[1],_e=function(e){var t;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=i.d.doc("commentaries/".concat(g.id)),a.next=3,r.a.awrap(t.update({commentaries:i.c.firestore.FieldValue.arrayRemove(e)}));case 3:case"end":return a.stop()}}))};return Object(s.useEffect)((function(){var e=function(){return null};return function(){var t;r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=i.d.doc("commentaries/".concat(g.id)),a.prev=1,a.next=4,r.a.awrap(t.onSnapshot((function(e){try{se(e.data().commentaries),me(!1)}catch(t){console.log("Error fetchin commentaries")}})));case 4:e=a.sent,a.next=10;break;case 7:a.prev=7,a.t0=a.catch(1),console.error(a.t0);case 10:case"end":return a.stop()}}),null,null,[[1,7]])}(),e}),[N,g.id]),l.a.createElement(l.a.Fragment,null,t&&l.a.createElement("div",{className:"cac_post ".concat(O?"cac_post--crop":""),onClick:C},l.a.createElement("div",{className:"cac_post_heading"},f&&l.a.createElement("img",{src:t.photoURL||P.a,className:"cac_post_heading_photo",alt:t.displayName,onClick:function(e){e.stopPropagation(),z.push("/profile/".concat(t.id))}}),l.a.createElement("div",{className:"cac_post_text-container"},_?l.a.createElement(m.b,{to:"/".concat(d,"/").concat(g.id),className:"cac_post_title cac_post_title--link"},g.title):l.a.createElement("span",{className:"cac_post_title"},g.title),f&&l.a.createElement("span",{onClick:function(e){e.stopPropagation(),z.push("/profile/".concat(t.id))},className:"cac_post_author--link"},l.a.createElement(R.a,{className:"cac_post_author",rank:t.rank},t.displayName)),y?l.a.createElement("span",{className:"cac_post_date"},g.date):l.a.createElement(x.a,{className:"cac_post_date",live:!1,date:g.createdAt?1e3*g.createdAt.seconds:new Date})),l.a.createElement(S.a,{className:"cac_post_options",user:a,author:t,handleDelete:function(){var e=i.d.doc("test-posts/".concat(g.id));console.log("eee"),e.delete(),$()}})),l.a.createElement(j,{content:g.content,className:"cac_post_content markdown-body ".concat(O?"cac_post_content--crop":"")}),l.a.createElement("div",{className:"cac_post_interaction"},l.a.createElement("div",{className:"cac_post_interaction-box",onClick:function(e){e.stopPropagation();!y&&a.logged?function(){var e;r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(X(!T),e=i.d.doc("test-posts/".concat(g.id)),T){t.next=8;break}return ne(ae+1),t.next=6,r.a.awrap(e.update({likesList:i.c.firestore.FieldValue.arrayUnion(a.uid)}));case 6:t.next=11;break;case 8:return ne(ae-1),t.next=11,r.a.awrap(e.update({likesList:i.c.firestore.FieldValue.arrayRemove(a.uid)}));case 11:case"end":return t.stop()}}))}():alert("You need to sign in to like posts")}},l.a.createElement("span",{className:"cac_post_interaction-counter"},ae),l.a.createElement(H,{className:"cac_post_icon cac_post_heart ".concat(T?"cac_post_heart--filled":"")}),l.a.createElement("span",{className:"cac_post_interaction-label"},"Like")),l.a.createElement("div",{className:"cac_post_interaction-box cac_post_interaction-box--comment"},l.a.createElement("span",{className:"cac_post_interaction-counter"},g.commentariesCount),l.a.createElement(Z,{className:"cac_post_icon cac_post_comment"}),l.a.createElement("span",{className:"cac_post_interaction-label"},"Comment")),l.a.createElement("div",{className:"cac_post_interaction-box",onClick:function(e){e.stopPropagation();!y&&a.logged?function(){var e;r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=i.d.doc("users/".concat(a.uid)),q(!Y),Y){t.next=7;break}return t.next=5,r.a.awrap(e.update({saved:i.c.firestore.FieldValue.arrayUnion(g.id)}));case 5:t.next=9;break;case 7:return t.next=9,r.a.awrap(e.update({saved:i.c.firestore.FieldValue.arrayRemove(g.id)}));case 9:case"end":return t.stop()}}))}():alert("you need to sign in to save posts")}},l.a.createElement(K,{className:"cac_post_icon cac_post_bookmark ".concat(Y?"cac_post_bookmark--filled":"")}),l.a.createElement("span",{className:"cac_post_interaction-label"},"Save"))),N&&l.a.createElement("div",{className:"cac_post_commentaries-section"},a.logged&&l.a.createElement("div",{className:"cac_post_create-commentary"},l.a.createElement("textarea",{className:"cac_post_create-commentary_textarea",value:J,onChange:function(e){return B(e.target.value)}}),l.a.createElement(V.b,{className:"cac_poist_create-commentary_button",onClick:function(){!fe&&J&&function(){var e,t;r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return ve(!0),e=i.d.doc("commentaries/".concat(g.id)),t={id:Object(F.a)(),author:a.uid,content:J,date:new Date},n.next=5,r.a.awrap(e.update({commentaries:i.c.firestore.FieldValue.arrayUnion(t)}));case 5:ve(!1);case 6:case"end":return n.stop()}}))}(),B("")}},"Comment")),l.a.createElement("div",{className:"cac_post_commentaries"},ue?l.a.createElement(l.a.Fragment,null,l.a.createElement(D,null),l.a.createElement(D,null),l.a.createElement(D,null)):oe.sort((function(e,t){return t.date.toDate()-e.date.toDate()})).map((function(e,t){return l.a.createElement(L,{handleDelete:function(){return _e(e)},postRef:"".concat(d,"/").concat(e.id),key:t,user:a,author:Object(n.a)({id:e.author},h[e.author]),content:e.content,date:e.date})}))))))}},173:function(e,t){},319:function(e,t,a){},521:function(e,t,a){},524:function(e,t,a){},525:function(e,t,a){}}]);
//# sourceMappingURL=2.fc4f9524.chunk.js.map