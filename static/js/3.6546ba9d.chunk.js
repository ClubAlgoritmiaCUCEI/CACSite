(this.webpackJsonpcac_site=this.webpackJsonpcac_site||[]).push([[3],{100:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r})),a.d(t,"c",(function(){return o}));var n=function(e){switch(e){case 0:return"January";case 1:return"February";case 2:return"March";case 3:return"April";case 4:return"May";case 5:return"June";case 6:return"July";case 7:return"August";case 8:return"September";case 9:return"October";case 10:return"November";case 11:return"December";default:return null}},r=function(e){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=a.length,r=0;r<e;r++)t+=a[Math.floor(Math.random()*n)];return t},c=/<br>|<\/br>|<br\/>/gi,o=function(e){return e.replace(c,"")}},109:function(e,t,a){},111:function(e,t,a){},112:function(e,t,a){},113:function(e,t,a){},114:function(e,t,a){"use strict";var n=a(1),r=a(4),c=a.n(r),o=a(3),s=a(0),i=a.n(s),l=a(6),u=a(17),m=a(5),d=a(117),p=a.n(d),f=a(120),v=a.n(f),_=a(533),g=a(530),y=(a(109),function(e){var t=e.language,a=void 0===t?null:t,n=e.value;return i.a.createElement(_.a,{language:a,style:g.a},n)}),h=a(100),b=(a(111),v()({isValidNode:function(e){return"script"!==e.type&&"break"!==e.type}})),E=function(e){var t=e.content,a=void 0===t?"":t,n=e.className,r=void 0===n?"":n;return i.a.createElement(p.a,{className:"cac_markdown ".concat(r),source:Object(h.c)(a),renderers:{code:y},escapeHtml:!1,astPlugins:[b]})},O=a(106),w=a.n(O),k=a(21),N=a(25),j=a(20),x=a.n(j),C=(a(112),a(32),function(e){var t=e.handleDelete,a=void 0===t?function(){return console.log("?>?")}:t,n=e.user,r=e.author,c=e.date,o=e.content;return i.a.createElement("div",{className:"cac_commentary"},i.a.createElement("div",{className:"cac_commentary_heading"},i.a.createElement("img",{src:r&&r.photoURL||x.a,alt:r?r.displayName:"",className:"cac_commentary_photo"}),i.a.createElement("div",{className:"cac_commentary_heading_text"},i.a.createElement(m.b,{to:"/profile/".concat(r.id),className:"cac_commentary_name--link"},i.a.createElement(k.a,{className:"cac_commentary_name",rank:r?r.rank:null},r?r.displayName:"")),i.a.createElement(w.a,{className:"cac_post_date",date:c.toDate()})),i.a.createElement(N.a,{handleDelete:a,className:"cac_commentary_options",user:n,author:r})),i.a.createElement(E,{content:o,className:"cac_commentary_content"}))}),R=function(){return i.a.createElement("div",{className:"cac_commentary cac_loading-commentary"},i.a.createElement("div",{className:"gradient cac_loading-commentary_photo"}),i.a.createElement("div",{className:"gradient cac_loading-commentary_name"}),i.a.createElement("div",{className:"gradient cac_loading_commentary_content"}))},L=a(9);function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function V(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var A=i.a.createElement("title",null,"ionicons-v5-f"),P=function(e){var t=e.svgRef,a=e.title,n=V(e,["svgRef","title"]);return i.a.createElement("svg",S({width:512,height:512,viewBox:"0 0 512 512",ref:t},n),void 0===a?A:a?i.a.createElement("title",null,a):null,i.a.createElement("path",{d:"M352.92,80C288,80,256,144,256,144s-32-64-96.92-64C106.32,80,64.54,124.14,64,176.81c-1.1,109.33,86.73,187.08,183,252.42a16,16,0,0,0,18,0c96.26-65.34,184.09-143.09,183-252.42C447.46,124.14,405.68,80,352.92,80Z",style:{fill:"auto",stroke:"auto",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:32}}))},D=i.a.forwardRef((function(e,t){return i.a.createElement(P,S({svgRef:t},e))}));a.p;function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function M(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var U=i.a.createElement("title",null,"ionicons-v5-l"),H=function(e){var t=e.svgRef,a=e.title,n=M(e,["svgRef","title"]);return i.a.createElement("svg",F({width:512,height:512,viewBox:"0 0 512 512",ref:t},n),void 0===a?U:a?i.a.createElement("title",null,a):null,i.a.createElement("path",{d:"M408,64H104a56.16,56.16,0,0,0-56,56V312a56.16,56.16,0,0,0,56,56h40v80l93.72-78.14a8,8,0,0,1,5.13-1.86H408a56.16,56.16,0,0,0,56-56V120A56.16,56.16,0,0,0,408,64Z",style:{fill:"auto",stroke:"auto",strokeLinejoin:"round",strokeWidth:32}}))},J=i.a.forwardRef((function(e,t){return i.a.createElement(H,F({svgRef:t},e))}));a.p;function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function B(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var W=i.a.createElement("title",null,"ionicons-v5-h"),Z=function(e){var t=e.svgRef,a=e.title,n=B(e,["svgRef","title"]);return i.a.createElement("svg",I({width:512,height:512,viewBox:"0 0 512 512",ref:t},n),void 0===a?W:a?i.a.createElement("title",null,a):null,i.a.createElement("path",{d:"M352,48H160a48,48,0,0,0-48,48V464L256,336,400,464V96A48,48,0,0,0,352,48Z",style:{fill:"auto",stroke:"auto",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:32}}))},T=i.a.forwardRef((function(e,t){return i.a.createElement(Z,I({svgRef:t},e))}));a.p,a(113),a(145),t.a=function(e){var t,a=e.user,r=e.from,d=void 0===r?"posts":r,p=e.showAuthor,f=void 0===p||p,v=e.enableLink,_=void 0===v||v,g=e.data,y=e.allUsers,h=e.preview,b=void 0!==h&&h,O=e.cropContent,j=void 0!==O&&O,S=e.commentary,V=void 0===S?{handleAddCommentary:function(){return null},showCommentaries:!1}:S,A=e.onClick,P=void 0===A?function(){return null}:A,F=e.parentHandleDelete,M=void 0===F?function(){return null}:F;t=y[g.author.id]||t;var U=Object(s.useState)(""),H=Object(o.a)(U,2),I=H[0],B=H[1],W=Object(s.useState)(!b&&a.logged&&g.likesList.includes(a.uid)),Z=Object(o.a)(W,2),Y=Z[0],q=Z[1],z=Object(s.useState)(!b&&a.logged&&a.saved.includes(g.id)),G=Object(o.a)(z,2),K=G[0],Q=G[1],X=Object(u.g)(),$=Object(s.useState)(b?0:g.likesList.length),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],ne=function(e){var t;return c.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=l.d.doc("commentaries/".concat(g.id)),console.log(e),a.next=4,c.a.awrap(t.update({commentaries:l.c.firestore.FieldValue.arrayRemove(e)}));case 4:case"end":return a.stop()}}))};return i.a.createElement(i.a.Fragment,null,t&&i.a.createElement("div",{className:"cac_post ".concat(j?"cac_post--crop":""),onClick:P},i.a.createElement("div",{className:"cac_post_heading"},f&&i.a.createElement("img",{src:t.photoURL||x.a,className:"cac_post_heading_photo",alt:t.displayName,onClick:function(e){e.stopPropagation(),X.push("/profile/".concat(t.id))}}),i.a.createElement("div",{className:"cac_post_text-container"},_?i.a.createElement(m.b,{to:"/".concat(d,"/").concat(g.id),className:"cac_post_title cac_post_title--link"},g.title):i.a.createElement("span",{className:"cac_post_title"},g.title),f&&i.a.createElement("span",{onClick:function(e){e.stopPropagation(),X.push("/profile/".concat(t.id))},className:"cac_post_author--link"},i.a.createElement(k.a,{className:"cac_post_author",rank:t.rank},t.displayName)),b?i.a.createElement("span",{className:"cac_post_date"},g.date):i.a.createElement(w.a,{className:"cac_post_date",live:!1,date:g.createdAt?g.createdAt.toDate():new Date})),i.a.createElement(N.a,{className:"cac_post_options",user:a,author:t,handleDelete:function(){var e=l.d.doc("test-posts/".concat(g.id));console.log("eee"),e.delete(),M()}})),i.a.createElement(E,{content:g.content,className:"cac_post_content markdown-body ".concat(j?"cac_post_content--crop":"")}),i.a.createElement("div",{className:"cac_post_interaction"},i.a.createElement("div",{className:"cac_post_interaction-box",onClick:function(e){e.stopPropagation();!b&&a.logged?function(){var e;c.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(q(!Y),e=l.d.doc("test-posts/".concat(g.id)),Y){t.next=8;break}return ae(te+1),t.next=6,c.a.awrap(e.update({likesList:l.c.firestore.FieldValue.arrayUnion(a.uid)}));case 6:t.next=11;break;case 8:return ae(te-1),t.next=11,c.a.awrap(e.update({likesList:l.c.firestore.FieldValue.arrayRemove(a.uid)}));case 11:case"end":return t.stop()}}))}():alert("You need to sign in to like posts")}},i.a.createElement("span",{className:"cac_post_interaction-counter"},te),i.a.createElement(D,{className:"cac_post_icon cac_post_heart ".concat(Y?"cac_post_heart--filled":"")}),i.a.createElement("span",{className:"cac_post_interaction-label"},"Like")),i.a.createElement("div",{className:"cac_post_interaction-box cac_post_interaction-box--comment"},i.a.createElement("span",{className:"cac_post_interaction-counter"},g.commentariesCount),i.a.createElement(J,{className:"cac_post_icon cac_post_comment"}),i.a.createElement("span",{className:"cac_post_interaction-label"},"Comment")),i.a.createElement("div",{className:"cac_post_interaction-box",onClick:function(e){e.stopPropagation();!b&&a.logged?function(){var e;c.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=l.d.doc("users/".concat(a.uid)),Q(!K),K){t.next=7;break}return t.next=5,c.a.awrap(e.update({saved:l.c.firestore.FieldValue.arrayUnion(g.id)}));case 5:t.next=9;break;case 7:return t.next=9,c.a.awrap(e.update({saved:l.c.firestore.FieldValue.arrayRemove(g.id)}));case 9:case"end":return t.stop()}}))}():alert("you need to sign in to save posts")}},i.a.createElement(T,{className:"cac_post_icon cac_post_bookmark ".concat(K?"cac_post_bookmark--filled":"")}),i.a.createElement("span",{className:"cac_post_interaction-label"},"Save"))),V.showCommentaries&&i.a.createElement("div",{className:"cac_post_commentaries-section"},a.logged&&i.a.createElement("div",{className:"cac_post_create-commentary"},i.a.createElement("textarea",{className:"cac_post_create-commentary_textarea",value:I,onChange:function(e){return B(e.target.value)}}),i.a.createElement(L.b,{className:"cac_poist_create-commentary_button",onClick:function(){V.handleAddCommentary(I),B("")}},"Comment")),i.a.createElement("div",{className:"cac_post_commentaries"},V.isLoading?i.a.createElement(i.a.Fragment,null,i.a.createElement(R,null),i.a.createElement(R,null),i.a.createElement(R,null)):V.data.sort((function(e,t){return t.date.toDate()-e.date.toDate()})).map((function(e,t){return i.a.createElement(C,{handleDelete:function(){return ne(e)},postRef:"".concat(d,"/").concat(e.id),key:t,user:a,author:Object(n.a)({id:e.author},y[e.author]),content:e.content,date:e.date})}))))))}},122:function(e,t){},529:function(e,t,a){"use strict";var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),r=new Uint8Array(16);function c(){if(!n)throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.");return n(r)}for(var o=[],s=0;s<256;++s)o[s]=(s+256).toString(16).substr(1);var i=function(e,t){var a=t||0,n=o;return[n[e[a++]],n[e[a++]],n[e[a++]],n[e[a++]],"-",n[e[a++]],n[e[a++]],"-",n[e[a++]],n[e[a++]],"-",n[e[a++]],n[e[a++]],"-",n[e[a++]],n[e[a++]],n[e[a++]],n[e[a++]],n[e[a++]],n[e[a++]]].join("")};t.a=function(e,t,a){var n=t&&a||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var r=(e=e||{}).random||(e.rng||c)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t)for(var o=0;o<16;++o)t[n+o]=r[o];return t||i(r)}},531:function(e,t,a){"use strict";a.r(t);var n=a(4),r=a.n(n),c=a(1),o=a(3),s=a(0),i=a.n(s),l=a(6),u=a(529),m=a(34),d=a(7),p=a(114);t.default=function(e){var t=e.match,a=e.from,n=e.Fallback,f=e.showAuthor,v=void 0!==f&&f,_=t.params.id,g=Object(s.useContext)(m.a),y=Object(s.useContext)(d.c),h=Object(s.useContext)(d.a),b=Object(s.useState)(void 0),E=Object(o.a)(b,2),O=E[0],w=E[1],k=Object(s.useState)([]),N=Object(o.a)(k,2),j=N[0],x=N[1],C=Object(s.useState)(!0),R=Object(o.a)(C,2),L=R[0],S=R[1],V=Object(s.useState)(!1),A=Object(o.a)(V,2),P=A[0],D=A[1];Object(s.useEffect)((function(){var e=function(){var e,t;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e=l.d.doc("test-posts/".concat(_)),a.prev=1,a.next=4,r.a.awrap(e.get());case 4:t=a.sent,w(Object(c.a)({id:t.id},t.data())),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),console.error(a.t0);case 11:case"end":return a.stop()}}),null,null,[[1,8]])};if(g.status.editorial){var t=g.posts.editorial.find((function(e){return e.id===_}));t?w(t):e()}else e()}),[_,g,a]),Object(s.useEffect)((function(){var e=function(){return null};return function(){var t;r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=l.d.doc("commentaries/".concat(_)),a.prev=1,a.next=4,r.a.awrap(t.onSnapshot((function(e){console.log(e.data()),x(e.data().commentaries),S(!1)})));case 4:e=a.sent,a.next=10;break;case 7:a.prev=7,a.t0=a.catch(1),console.error(a.t0);case 10:case"end":return a.stop()}}),null,null,[[1,7]])}(),e}),[_]);return i.a.createElement(i.a.Fragment,null,y.isLoading||h.isLoading||!O?i.a.createElement(n,null):i.a.createElement(p.a,{enableLink:!1,showAuthor:v,allUsers:h.usersMap,data:O,from:a,cropContent:!1,commentary:{showCommentaries:!0,handleAddCommentary:function(e){!P&&e&&function(){var t,a;r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return D(!0),t=l.d.doc("commentaries/".concat(O.id)),a={id:Object(u.a)(),author:y.uid,content:e,date:new Date},n.next=5,r.a.awrap(t.update({commentaries:l.c.firestore.FieldValue.arrayUnion(a)}));case 5:D(!1);case 6:case"end":return n.stop()}}))}()},isLoading:L,data:j},user:y}))}}}]);
//# sourceMappingURL=3.6546ba9d.chunk.js.map