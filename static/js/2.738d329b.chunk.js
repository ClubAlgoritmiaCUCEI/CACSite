(this.webpackJsonpcac_site=this.webpackJsonpcac_site||[]).push([[2],{112:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return c}));var n=function(e){switch(e){case 0:return"January";case 1:return"February";case 2:return"March";case 3:return"April";case 4:return"May";case 5:return"June";case 6:return"July";case 7:return"August";case 8:return"September";case 9:return"October";case 10:return"November";case 11:return"December";default:return null}},r=function(e){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=a.length,r=0;r<e;r++)t+=a[Math.floor(Math.random()*n)];return t},c=function(e){return function(e){var t='<span style="'.concat("display:block;text-align:center",'">$$'),a=new RegExp("\\$\\$\\s*([^$]*\\S)\\s*\\$\\$","gi");return e.replace(a,(function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return console.log(a),t+a[1]+"$$</span>"}))}(function(e){return e.replace(/<br>|<\/br>|<br\/>/gi,"")}(e))}},151:function(e,t,a){"use strict";var n=a(1),r=a(4),c=a.n(r),o=a(7),s=a(3),i=a(0),l=a.n(i),u=a(6),m=a(8),p=a(5),d=a(153),f=a.n(d),v=a(163),_=a.n(v),h=a(553),b=a(551),g=(a(321),function(e){var t=e.language,a=void 0===t?null:t,n=e.value;return l.a.createElement(h.a,{language:a,style:b.a},n)}),y=a(515),E=a.n(y),O=a(520),k=a.n(O),N=a(112),j=(a(523),_()({isValidNode:function(e){return"script"!==e.type&&"break"!==e.type}})),w=function(e){var t=e.content,a=void 0===t?"":t,n=e.className,r=void 0===n?"":n;return Object(i.useMemo)((function(){var e={className:"cac_markdown ".concat(r),source:a,plugins:[k.a],renderers:{code:g,math:function(e){return l.a.createElement(E.a.Node,null,e.value)},inlineMath:function(e){return l.a.createElement(E.a.Node,{inline:!0},e.value)}},escapeHtml:!1,astPlugins:[j]};return l.a.createElement(E.a.Context,{input:"tex"},l.a.createElement(f.a,e))}),[a,r])},x=a(193),R=a.n(x),C=a(24),S=a(30),L=a(22),P=a.n(L),D=(a(526),a(38),function(e){var t=e.handleDelete,a=void 0===t?function(){return console.log("?>?")}:t,n=e.user,r=e.author,c=e.date,o=e.content;return l.a.createElement("div",{className:"cac_commentary"},l.a.createElement("div",{className:"cac_commentary_heading"},l.a.createElement("img",{src:r&&r.photoURL||P.a,alt:r?r.displayName:"",className:"cac_commentary_photo"}),l.a.createElement("div",{className:"cac_commentary_heading_text"},l.a.createElement(p.b,{to:"/profile/".concat(r.id),className:"cac_commentary_name--link"},l.a.createElement(C.a,{className:"cac_commentary_name",rank:r?r.rank:null},r?r.displayName:"")),l.a.createElement(R.a,{className:"cac_post_date",date:c.toDate()})),l.a.createElement(S.a,{handleDelete:a,className:"cac_commentary_options",user:n,author:r})),l.a.createElement(w,{content:o,className:"cac_commentary_content"}))}),V=function(){return l.a.createElement("div",{className:"cac_commentary cac_loading-commentary"},l.a.createElement("div",{className:"gradient cac_loading-commentary_photo"}),l.a.createElement("div",{className:"gradient cac_loading-commentary_name"}),l.a.createElement("div",{className:"gradient cac_loading_commentary_content"}))},F=a(11),M=a(548);function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function $(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var U=l.a.createElement("title",null,"ionicons-v5-f"),H=function(e){var t=e.svgRef,a=e.title,n=$(e,["svgRef","title"]);return l.a.createElement("svg",A({width:512,height:512,viewBox:"0 0 512 512",ref:t},n),void 0===a?U:a?l.a.createElement("title",null,a):null,l.a.createElement("path",{d:"M352.92,80C288,80,256,144,256,144s-32-64-96.92-64C106.32,80,64.54,124.14,64,176.81c-1.1,109.33,86.73,187.08,183,252.42a16,16,0,0,0,18,0c96.26-65.34,184.09-143.09,183-252.42C447.46,124.14,405.68,80,352.92,80Z",style:{fill:"auto",stroke:"auto",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:32}}))},J=l.a.forwardRef((function(e,t){return l.a.createElement(H,A({svgRef:t},e))}));a.p;function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function I(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var W=l.a.createElement("title",null,"ionicons-v5-l"),Z=function(e){var t=e.svgRef,a=e.title,n=I(e,["svgRef","title"]);return l.a.createElement("svg",B({width:512,height:512,viewBox:"0 0 512 512",ref:t},n),void 0===a?W:a?l.a.createElement("title",null,a):null,l.a.createElement("path",{d:"M408,64H104a56.16,56.16,0,0,0-56,56V312a56.16,56.16,0,0,0,56,56h40v80l93.72-78.14a8,8,0,0,1,5.13-1.86H408a56.16,56.16,0,0,0,56-56V120A56.16,56.16,0,0,0,408,64Z",style:{fill:"auto",stroke:"auto",strokeLinejoin:"round",strokeWidth:32}}))},Y=l.a.forwardRef((function(e,t){return l.a.createElement(Z,B({svgRef:t},e))}));a.p;function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function z(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var G=l.a.createElement("title",null,"ionicons-v5-h"),K=function(e){var t=e.svgRef,a=e.title,n=z(e,["svgRef","title"]);return l.a.createElement("svg",q({width:512,height:512,viewBox:"0 0 512 512",ref:t},n),void 0===a?G:a?l.a.createElement("title",null,a):null,l.a.createElement("path",{d:"M352,48H160a48,48,0,0,0-48,48V464L256,336,400,464V96A48,48,0,0,0,352,48Z",style:{fill:"auto",stroke:"auto",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:32}}))},Q=l.a.forwardRef((function(e,t){return l.a.createElement(K,q({svgRef:t},e))}));a.p,a(527),a(528),t.a=function(e){var t,a=e.user,r=e.from,d=void 0===r?"posts":r,f=e.showAuthor,v=void 0===f||f,_=e.enableLink,h=void 0===_||_,b=e.data,g=e.allUsers,y=e.preview,E=void 0!==y&&y,O=e.cropContent,k=void 0!==O&&O,j=e.showCommentaries,x=void 0!==j&&j,L=e.onClick,A=void 0===L?function(){return null}:L,$=e.parentHandleDelete,U=void 0===$?function(){return null}:$;t=g[b.author.id]||t;var H=Object(i.useState)(""),B=Object(s.a)(H,2),I=B[0],W=B[1],Z=Object(i.useState)(!E&&a.logged&&a.saved.includes(b.id)),q=Object(s.a)(Z,2),z=q[0],G=q[1],K=Object(m.g)(),T=Object(i.useState)(!E&&a.logged&&b.likesList.includes(a.uid)),X=Object(s.a)(T,2),ee=X[0],te=X[1],ae=Object(i.useState)(E?0:b.likesList.length),ne=Object(s.a)(ae,2),re=ne[0],ce=ne[1],oe=Object(i.useState)([]),se=Object(s.a)(oe,2),ie=se[0],le=se[1],ue=Object(i.useState)(!0),me=Object(s.a)(ue,2),pe=me[0],de=me[1],fe=Object(i.useState)(!1),ve=Object(s.a)(fe,2),_e=ve[0],he=ve[1],be=function(){var e=Object(o.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.d.doc("commentaries/".concat(b.id)),e.next=3,a.update({commentaries:u.c.firestore.FieldValue.arrayRemove(t)});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=function(){return null};return function(){var t=Object(o.a)(c.a.mark((function t(){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=u.d.doc("commentaries/".concat(b.id)),t.prev=1,t.next=4,a.onSnapshot((function(e){try{le(e.data().commentaries),de(!1)}catch(t){console.log("Error fetchin commentaries")}}));case 4:e=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(){return t.apply(this,arguments)}}()(),e}),[x,b.id]),l.a.createElement(l.a.Fragment,null,t&&l.a.createElement("div",{className:"cac_post ".concat(k?"cac_post--crop":""),onClick:A},l.a.createElement("div",{className:"cac_post_heading"},v&&l.a.createElement("img",{src:t.photoURL||P.a,className:"cac_post_heading_photo",alt:t.displayName,onClick:function(e){e.stopPropagation(),K.push("/profile/".concat(t.id))}}),l.a.createElement("div",{className:"cac_post_text-container"},h?l.a.createElement(p.b,{to:"/".concat(d,"/").concat(b.id),className:"cac_post_title cac_post_title--link"},b.title):l.a.createElement("span",{className:"cac_post_title"},b.title),v&&l.a.createElement("span",{onClick:function(e){e.stopPropagation(),K.push("/profile/".concat(t.id))},className:"cac_post_author--link"},l.a.createElement(C.a,{className:"cac_post_author",rank:t.rank},t.displayName)),E?l.a.createElement("span",{className:"cac_post_date"},b.date):l.a.createElement(R.a,{className:"cac_post_date",live:!1,date:b.createdAt?1e3*b.createdAt.seconds:new Date})),l.a.createElement(S.a,{className:"cac_post_options",user:a,author:t,handleDelete:function(){var e=u.d.doc("test-posts/".concat(b.id));console.log("eee"),e.delete(),U()}})),l.a.createElement(w,{content:b.content,className:"cac_post_content markdown-body ".concat(k?"cac_post_content--crop":"")}),l.a.createElement("div",{className:"cac_post_interaction"},l.a.createElement("div",{className:"cac_post_interaction-box",onClick:function(e){e.stopPropagation();var t=function(){var e=Object(o.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(te(!ee),t=u.d.doc("test-posts/".concat(b.id)),ee){e.next=8;break}return ce(re+1),e.next=6,t.update({likesList:u.c.firestore.FieldValue.arrayUnion(a.uid)});case 6:e.next=11;break;case 8:return ce(re-1),e.next=11,t.update({likesList:u.c.firestore.FieldValue.arrayRemove(a.uid)});case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();!E&&a.logged?t():alert("You need to sign in to like posts")}},l.a.createElement("span",{className:"cac_post_interaction-counter"},re),l.a.createElement(J,{className:"cac_post_icon cac_post_heart ".concat(ee?"cac_post_heart--filled":"")}),l.a.createElement("span",{className:"cac_post_interaction-label"},"Like")),l.a.createElement("div",{className:"cac_post_interaction-box cac_post_interaction-box--comment"},l.a.createElement("span",{className:"cac_post_interaction-counter"},b.commentariesCount),l.a.createElement(Y,{className:"cac_post_icon cac_post_comment"}),l.a.createElement("span",{className:"cac_post_interaction-label"},"Comment")),l.a.createElement("div",{className:"cac_post_interaction-box",onClick:function(e){e.stopPropagation();var t=function(){var e=Object(o.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.d.doc("users/".concat(a.uid)),G(!z),z){e.next=7;break}return e.next=5,t.update({saved:u.c.firestore.FieldValue.arrayUnion(b.id)});case 5:e.next=9;break;case 7:return e.next=9,t.update({saved:u.c.firestore.FieldValue.arrayRemove(b.id)});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();!E&&a.logged?t():alert("you need to sign in to save posts")}},l.a.createElement(Q,{className:"cac_post_icon cac_post_bookmark ".concat(z?"cac_post_bookmark--filled":"")}),l.a.createElement("span",{className:"cac_post_interaction-label"},"Save"))),x&&l.a.createElement("div",{className:"cac_post_commentaries-section"},a.logged&&l.a.createElement("div",{className:"cac_post_create-commentary"},l.a.createElement("textarea",{className:"cac_post_create-commentary_textarea",value:I,onChange:function(e){return W(e.target.value)}}),l.a.createElement(F.b,{className:"cac_poist_create-commentary_button",onClick:function(){!_e&&I&&function(){var e=Object(o.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return he(!0),t=u.d.doc("commentaries/".concat(b.id)),n={id:Object(M.a)(),author:a.uid,content:Object(N.a)(I),date:new Date},e.next=5,t.update({commentaries:u.c.firestore.FieldValue.arrayUnion(n)});case 5:he(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),W("")}},"Comment")),l.a.createElement("div",{className:"cac_post_commentaries"},pe?l.a.createElement(l.a.Fragment,null,l.a.createElement(V,null),l.a.createElement(V,null),l.a.createElement(V,null)):ie.sort((function(e,t){return t.date.toDate()-e.date.toDate()})).map((function(e,t){return l.a.createElement(D,{handleDelete:function(){return be(e)},postRef:"".concat(d,"/").concat(e.id),key:t,user:a,author:Object(n.a)({id:e.author},g[e.author]),content:e.content,date:e.date})}))))))}},176:function(e,t){},321:function(e,t,a){},523:function(e,t,a){},526:function(e,t,a){},527:function(e,t,a){}}]);
//# sourceMappingURL=2.738d329b.chunk.js.map