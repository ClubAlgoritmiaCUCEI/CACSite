(this.webpackJsonpcac_site=this.webpackJsonpcac_site||[]).push([[3],{529:function(e,t,a){},530:function(e,t,a){},557:function(e,t,a){"use strict";a.r(t);var c=a(3),n=a(0),s=a.n(n),r=a(8),o=a(39),l=a(45),u=a(35),i=a(9),m=a(151),_=a(4),p=a.n(_),b=a(7),d=a(6),f=a(112),v=(a(529),a(11)),h=function(e){var t=e.type,a=e.user,r=Object(n.useState)(!1),o=Object(c.a)(r,2),l=o[0],i=o[1],m=Object(n.useState)(""),_=Object(c.a)(m,2),h=_[0],j=_[1],O=Object(n.useState)(""),E=Object(c.a)(O,2),k=E[0],C=E[1],x=Object(n.useState)(!1),w=Object(c.a)(x,2),y=w[0],g=w[1],N=Object(n.useContext)(u.a),S=function(){j(""),C(""),i(!1)};return s.a.createElement("div",{className:"cac_create_post_small ".concat(l?"editing":"not-editing")},l?s.a.createElement(s.a.Fragment,null,s.a.createElement("textarea",{placeholder:"Title",value:k,onChange:function(e){return C(e.target.value)},className:"cac_create_post_small_textarea cac_create_post_small_textarea--title"}),s.a.createElement("textarea",{placeholder:"Content (Markdown)",value:h,onChange:function(e){return j(e.target.value)},className:"cac_create_post_small_textarea cac_create_post_small_textarea--content"}),s.a.createElement(v.b,{className:"cac_create_post_small_button cac_create_post_small_button--post ".concat(y||""===k||""===h?"cac_create_post_small_button--disabled":""),onClick:function(){var e=function(){var e=Object(b.a)(p.a.mark((function e(){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={title:k,content:Object(f.a)(h),type:t,comments:[],likesList:[],author:{id:a.uid,displayName:a.displayName},createdAt:d.c.firestore.FieldValue.serverTimestamp(),timestamp:d.c.firestore.FieldValue.serverTimestamp(),key:Date.now()},e.prev=1,e.next=4,d.d.collection("test-posts").add(c);case 4:S(),N.fetch(t,!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:g(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();y||(g(!0),e())}},"Post"),s.a.createElement(v.b,{className:"cac_create_post_small_button cac_create_post_small_button--cancel",onClick:S},"Cancel")):s.a.createElement(s.a.Fragment,null,s.a.createElement("textarea",{className:"cac_create_post_small_textarea",value:"",placeholder:"Create Post",onClick:function(){return i(!0)},onChange:function(e){i(!0),C(e.target.value)}}),s.a.createElement(v.b,{className:"cac_create_post_small_button cac_create_post_small_button--post ".concat(y||""===k||""===h?"cac_create_post_small_button--disabled":"")},"Post")))};a(530),t.default=function(e){var t=e.className,a=void 0===t?"":t,_=e.Fallback,p=e.from,b=e.type,d=e.showAuthor,f=void 0!==d&&d,v=e.enableCreate,j=void 0!==v&&v,O=e.enablePreview,E=void 0===O||O,k=Object(n.useContext)(u.a),C=Object(n.useContext)(i.c),x=Object(n.useContext)(i.a),w=Object(r.g)(),y=Object(n.useState)(!1),g=Object(c.a)(y,2),N=g[0],S=g[1],F=Object(n.useState)({}),A=Object(c.a)(F,2),L=A[0],M=A[1],P=Object(n.useRef)(null),D=Object(o.useMediaQuery)({query:"(max-width: 800px)"});Object(l.a)(P,(function(){return S(!1)})),Object(n.useEffect)((function(){k.status.IDB&&k.fetch(b)}),[b,k.status.IDB]);return Object(n.useEffect)((function(){var e=function(e){"Escape"===e.key&&S(!1)};return N?(document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}):function(){return null}}),[N]),s.a.createElement("div",{className:"cac_posts ".concat(a)},j&&s.a.createElement(h,{type:b,user:C}),!C.isLoading&&k.status[b]?k.posts[b].map((function(e,t){return s.a.createElement(m.a,{user:C,key:t,showAuthor:f,data:e,allUsers:x.usersMap,cropContent:!0,onClick:function(){return function(e){E&&!D?(console.log("click"),M(e),S(!0)):w.push("/".concat(p,"/").concat(e.id))}(e)},showCommentaries:!1,from:p})})):s.a.createElement(_,null),N&&s.a.createElement("div",{className:"cac_posts_background-black"},s.a.createElement("div",{className:"cac_post-open_container",ref:P},s.a.createElement(m.a,{user:C,key:L.id,showAuthor:f,className:"cac_posts_post-open",data:L,allUsers:x.usersMap,cropContent:!1,showCommentaries:!0,from:p}))))}}}]);
//# sourceMappingURL=3.6b616b34.chunk.js.map