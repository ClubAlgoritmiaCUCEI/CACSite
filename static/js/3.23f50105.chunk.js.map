{"version":3,"sources":["Views/home/index.js"],"names":["Home","Fallback","posts","useContext","PostsContext","allUsers","AllUsersContext","user","UserContext","useState","postSelected","setPostSelected","isOpen","setIsOpen","postRef","useRef","redirectOnClick","useMediaQuery","query","history","useHistory","useOutsideAlerter","useEffect","fetch","home","className","ref","usersMap","data","find","post","id","cropContent","showCommentaries","parentHandleDelete","isLoading","length","Object","keys","map","i","key","onClick","push"],"mappings":"oNAkFeA,UAhEF,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SACRC,EAAQC,qBAAWC,KACnBC,EAAWF,qBAAWG,KACtBC,EAAOJ,qBAAWK,KAHK,EAIWC,mBAAS,MAJpB,mBAItBC,EAJsB,KAIRC,EAJQ,OAKDF,oBAAS,GALR,mBAKtBG,EALsB,KAKdC,EALc,KAMvBC,EAAUC,iBAAO,MACjBC,EAAkBC,wBAAc,CAAEC,MAAO,uBACzCC,EAAUC,cAEhBC,YAAkBP,GAAS,kBAAMD,GAAU,MAE3CS,qBAAU,WACRpB,EAAMqB,MAAMC,SACX,CAACtB,EAAMqB,QAUV,OACE,yBAAKE,UAAU,YACZb,GACC,yBAAKa,UAAU,6BACb,yBAAKA,UAAU,0BAA0BC,IAAKZ,GAC5C,kBAAC,IAAD,CACET,SAAUA,EAASsB,SACnBF,UAAU,gBACVG,KAAM1B,EAAMA,MAAMsB,KAAKK,MAAK,SAAAC,GAAI,OAAIA,EAAKC,KAAOrB,KAChDsB,aAAa,EACbC,kBAAkB,EAClB1B,KAAMA,EACN2B,mBAAoB,WAClBrB,GAAU,SAMlBN,EAAK4B,WACPjC,EAAMA,MAAMsB,KAAKY,OAAS,GAC1BC,OAAOC,KAAKjC,EAASsB,UAAUS,OAAS,EACtClC,EAAMA,MAAMsB,KAAKe,KAAI,SAACT,EAAMU,GAAP,OACnB,kBAAC,IAAD,CACEjC,KAAMA,EACNkC,IAAKD,EACLZ,KAAME,EACNzB,SAAUA,EAASsB,SACnBK,aAAa,EACbU,QAAS,kBArCKX,EAqCiBD,EAAKC,QApCxCf,EACFG,EAAQwB,KAAR,iBAAuBZ,KAEvBlB,GAAU,GACVF,EAAgBoB,KALI,IAAAA,GAsCdE,kBAAkB,OAItB,kBAAChC,EAAD","file":"static/js/3.23f50105.chunk.js","sourcesContent":["import React, { useContext, useState, useRef, useEffect } from \"react\";\r\n\r\nimport { useMediaQuery } from \"react-responsive\";\r\n\r\nimport {\r\n  // eslint-disable-next-line no-unused-vars\r\n  BrowserRouter as Router,\r\n  useHistory\r\n} from \"react-router-dom\";\r\n\r\nimport { PostsContext } from \"../../Providers/postsProvider\";\r\nimport { UserContext, AllUsersContext } from \"../../Providers/userProvider\";\r\nimport useOutsideAlerter from \"../../Hooks/useOutsideAlerter\";\r\n\r\nimport Post from \"../../Components/post\";\r\n\r\nimport \"./style.css\";\r\n\r\nconst Home = ({ Fallback }) => {\r\n  const posts = useContext(PostsContext);\r\n  const allUsers = useContext(AllUsersContext);\r\n  const user = useContext(UserContext);\r\n  const [postSelected, setPostSelected] = useState(null);\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const postRef = useRef(null);\r\n  const redirectOnClick = useMediaQuery({ query: \"(max-width: 980px)\" });\r\n  const history = useHistory();\r\n\r\n  useOutsideAlerter(postRef, () => setIsOpen(false));\r\n\r\n  useEffect(() => {\r\n    posts.fetch.home();\r\n  }, [posts.fetch]);\r\n\r\n  const handlePostClick = id => {\r\n    if (redirectOnClick) {\r\n      history.push(`/posts/${id}`);\r\n    } else {\r\n      setIsOpen(true);\r\n      setPostSelected(id);\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"cac_home\">\r\n      {isOpen && (\r\n        <div className=\"cac_home_background-black\">\r\n          <div className=\"cac_home_post-container\" ref={postRef}>\r\n            <Post\r\n              allUsers={allUsers.usersMap}\r\n              className=\"cac_home_post\"\r\n              data={posts.posts.home.find(post => post.id === postSelected)}\r\n              cropContent={false}\r\n              showCommentaries={true}\r\n              user={user}\r\n              parentHandleDelete={() => {\r\n                setIsOpen(false);\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n      {!user.isLoading &&\r\n      posts.posts.home.length > 0 &&\r\n      Object.keys(allUsers.usersMap).length > 0 ? (\r\n        posts.posts.home.map((post, i) => (\r\n          <Post\r\n            user={user}\r\n            key={i}\r\n            data={post}\r\n            allUsers={allUsers.usersMap}\r\n            cropContent={true}\r\n            onClick={() => handlePostClick(post.id)}\r\n            showCommentaries={false}\r\n          />\r\n        ))\r\n      ) : (\r\n        <Fallback />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"],"sourceRoot":""}