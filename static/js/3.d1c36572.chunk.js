(this.webpackJsonpcac_site=this.webpackJsonpcac_site||[]).push([[3],{517:function(e,t,a){},518:function(e,t,a){},548:function(e,t,a){"use strict";a.r(t);var c=a(3),n=a(0),s=a.n(n),o=a(16),r=a(36),l=a(42),u=a(33),i=a(7),m=a(148),_=a(4),p=a.n(_),d=a(6),b=(a(517),a(9)),f=function(e){var t=e.type,a=e.user,o=Object(n.useState)(!1),r=Object(c.a)(o,2),l=r[0],i=r[1],m=Object(n.useState)(""),_=Object(c.a)(m,2),f=_[0],v=_[1],h=Object(n.useState)(""),j=Object(c.a)(h,2),O=j[0],E=j[1],k=Object(n.useState)(!1),C=Object(c.a)(k,2),x=C[0],w=C[1],y=Object(n.useContext)(u.a),g=function(){v(""),E(""),i(!1)};return s.a.createElement("div",{className:"cac_create_post_small ".concat(l?"editing":"not-editing")},l?s.a.createElement(s.a.Fragment,null,s.a.createElement("textarea",{placeholder:"Title",value:O,onChange:function(e){return E(e.target.value)},className:"cac_create_post_small_textarea cac_create_post_small_textarea--title"}),s.a.createElement("textarea",{placeholder:"Content (Markdown)",value:f,onChange:function(e){return v(e.target.value)},className:"cac_create_post_small_textarea cac_create_post_small_textarea--content"}),s.a.createElement(b.b,{className:"cac_create_post_small_button cac_create_post_small_button--post ".concat(x||""===O||""===f?"cac_create_post_small_button--disabled":""),onClick:function(){x||(w(!0),function(){var e;p.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return e={title:O,content:f,type:t,comments:[],likesList:[],author:{id:a.uid,displayName:a.displayName},createdAt:d.c.firestore.FieldValue.serverTimestamp(),timestamp:d.c.firestore.FieldValue.serverTimestamp(),key:Date.now()},c.prev=1,c.next=4,p.a.awrap(d.d.collection("test-posts").add(e));case 4:g(),y.fetch(t,!0),c.next=11;break;case 8:c.prev=8,c.t0=c.catch(1),console.error(c.t0);case 11:w(!1);case 12:case"end":return c.stop()}}),null,null,[[1,8]])}())}},"Post"),s.a.createElement(b.b,{className:"cac_create_post_small_button cac_create_post_small_button--cancel",onClick:g},"Cancel")):s.a.createElement(s.a.Fragment,null,s.a.createElement("textarea",{className:"cac_create_post_small_textarea",value:"",placeholder:"Create Post",onClick:function(){return i(!0)},onChange:function(e){i(!0),E(e.target.value)}}),s.a.createElement(b.b,{className:"cac_create_post_small_button cac_create_post_small_button--post ".concat(x||""===O||""===f?"cac_create_post_small_button--disabled":"")},"Post")))};a(518),t.default=function(e){var t=e.className,a=void 0===t?"":t,_=e.Fallback,p=e.from,d=e.type,b=e.showAuthor,v=void 0!==b&&b,h=e.enableCreate,j=void 0!==h&&h,O=e.enablePreview,E=void 0===O||O,k=Object(n.useContext)(u.a),C=Object(n.useContext)(i.c),x=Object(n.useContext)(i.a),w=Object(o.g)(),y=Object(n.useState)(!1),g=Object(c.a)(y,2),N=g[0],S=g[1],F=Object(n.useState)({}),A=Object(c.a)(F,2),L=A[0],M=A[1],P=Object(n.useRef)(null),D=Object(r.useMediaQuery)({query:"(max-width: 800px)"});Object(l.a)(P,(function(){return S(!1)})),Object(n.useEffect)((function(){k.status.IDB&&k.fetch(d)}),[d,k.status.IDB]);return Object(n.useEffect)((function(){var e=function(e){"Escape"===e.key&&S(!1)};return N?(document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}):function(){return null}}),[N]),s.a.createElement("div",{className:"cac_posts ".concat(a)},j&&s.a.createElement(f,{type:d,user:C}),!C.isLoading&&k.status[d]?k.posts[d].map((function(e,t){return s.a.createElement(m.a,{user:C,key:t,showAuthor:v,data:e,allUsers:x.usersMap,cropContent:!0,onClick:function(){return function(e){E&&!D?(console.log("click"),M(e),S(!0)):w.push("/".concat(p,"/").concat(e.id))}(e)},showCommentaries:!1,from:p})})):s.a.createElement(_,null),N&&s.a.createElement("div",{className:"cac_posts_background-black"},s.a.createElement("div",{className:"cac_post-open_container",ref:P},s.a.createElement(m.a,{user:C,key:L.id,showAuthor:v,className:"cac_posts_post-open",data:L,allUsers:x.usersMap,cropContent:!1,showCommentaries:!0,from:p}))))}}}]);
//# sourceMappingURL=3.d1c36572.chunk.js.map