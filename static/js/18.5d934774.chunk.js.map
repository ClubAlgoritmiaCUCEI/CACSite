{"version":3,"sources":["Components/single-post/home-post/index.js"],"names":["HomePost","match","posts","useContext","PostsContext","user","UserContext","allUsers","AllUsersContext","useState","postData","setPostData","id","params","useEffect","fetch","public","destroyerFunction","length","post","home","find","p","a","async","postsRef","firestore","doc","onSnapshot","snapshot","data","e","console","error","fetchPost","isLoading","enableLink","usersMap","className","cropContent","showCommentaries"],"mappings":"8LAyDeA,UA/CE,SAAC,GAAe,IAAbC,EAAY,EAAZA,MACZC,EAAQC,qBAAWC,KACnBC,EAAOF,qBAAWG,KAClBC,EAAWJ,qBAAWK,KAHE,EAIEC,mBAAS,IAJX,mBAIvBC,EAJuB,KAIbC,EAJa,KAKtBC,EAAOX,EAAMY,OAAbD,GAyBR,OAvBAE,qBAAU,WACRZ,EAAMa,MAAMC,WACX,CAACd,EAAMa,QAEVD,qBAAU,WACR,IAAIG,EAAoB,kBAAM,MAW9B,GAAqB,IAAjBf,EAAMgB,OAAc,CACtB,IAAMC,EAAOjB,EAAMA,MAAMkB,KAAKC,MAAK,SAAAC,GAAC,OAAIA,EAAEV,KAAOA,KAC7CO,EAAMR,EAAYQ,GAZN,mBAAAI,EAAAC,OAAA,gDACVC,EAAWC,IAAUC,IAAV,gBAAuBf,IACxC,IACEK,EAAoBQ,EAASG,YAAW,SAAMC,GAAN,SAAAN,EAAAC,OAAA,gDACtCb,EAAY,aAAEC,GAAIiB,EAASjB,IAAOiB,EAASC,SADL,wCAGxC,MAAOC,GACPC,QAAQC,MAAMF,GAPA,qCAaXG,GAEP,OAAOjB,IACN,CAACf,EAAOU,IAET,oCACGF,IAAaL,EAAK8B,WACjB,kBAAC,IAAD,CACEC,YAAY,EACZ7B,SAAUA,EAAS8B,SACnBC,UAAU,gBACVR,KAAMpB,EACN6B,aAAa,EACbC,kBAAkB,EAClBnC,KAAMA","file":"static/js/18.5d934774.chunk.js","sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\n\r\nimport { firestore } from \"../../../firebase\";\r\n\r\nimport { PostsContext } from \"../../../Providers/postsProvider\";\r\n\r\nimport { UserContext, AllUsersContext } from \"../../../Providers/userProvider\";\r\n\r\nimport Post from \"../../post\";\r\n\r\nconst HomePost = ({ match }) => {\r\n  const posts = useContext(PostsContext);\r\n  const user = useContext(UserContext);\r\n  const allUsers = useContext(AllUsersContext);\r\n  const [postData, setPostData] = useState({});\r\n  const { id } = match.params;\r\n\r\n  useEffect(() => {\r\n    posts.fetch.public();\r\n  }, [posts.fetch]);\r\n\r\n  useEffect(() => {\r\n    let destroyerFunction = () => null;\r\n    const fetchPost = async () => {\r\n      const postsRef = firestore.doc(`posts/${id}`);\r\n      try {\r\n        destroyerFunction = postsRef.onSnapshot(async snapshot => {\r\n          setPostData({ id: snapshot.id, ...snapshot.data() });\r\n        });\r\n      } catch (e) {\r\n        console.error(e);\r\n      }\r\n    };\r\n    if (posts.length !== 0) {\r\n      const post = posts.posts.home.find(p => p.id === id);\r\n      if (post) setPostData(post);\r\n      else fetchPost();\r\n    }\r\n    return destroyerFunction;\r\n  }, [posts, id]);\r\n  return (\r\n    <>\r\n      {postData && !user.isLoading && (\r\n        <Post\r\n          enableLink={false}\r\n          allUsers={allUsers.usersMap}\r\n          className=\"cac_home_post\"\r\n          data={postData}\r\n          cropContent={false}\r\n          showCommentaries={true}\r\n          user={user}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default HomePost;\r\n"],"sourceRoot":""}