(this.webpackJsonpcac_site=this.webpackJsonpcac_site||[]).push([[2],{100:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return c})),a.d(t,"c",(function(){return o}));var n=function(e){switch(e){case 0:return"January";case 1:return"February";case 2:return"March";case 3:return"April";case 4:return"May";case 5:return"June";case 6:return"July";case 7:return"August";case 8:return"September";case 9:return"October";case 10:return"November";case 11:return"December";default:return null}},c=function(e){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=a.length,c=0;c<e;c++)t+=a[Math.floor(Math.random()*n)];return t},r=/<br>|<\/br>|<br\/>/gi,o=function(e){return e.replace(r,"")}},109:function(e,t,a){},111:function(e,t,a){},112:function(e,t,a){},113:function(e,t,a){},114:function(e,t,a){"use strict";var n=a(1),c=a(4),r=a.n(c),o=a(3),s=a(0),l=a.n(s),i=a(6),u=a(17),m=a(5),d=a(116),p=a.n(d),_=a(119),f=a.n(_),v=a(533),b=a(530),h=(a(109),function(e){var t=e.language,a=void 0===t?null:t,n=e.value;return l.a.createElement(v.a,{language:a,style:b.a},n)}),g=a(100),y=(a(111),f()({isValidNode:function(e){return"script"!==e.type&&"break"!==e.type}})),E=function(e){var t=e.content,a=void 0===t?"":t,n=e.className,c=void 0===n?"":n;return l.a.createElement(p.a,{className:"cac_markdown ".concat(c),source:Object(g.c)(a),renderers:{code:h},escapeHtml:!1,astPlugins:[y]})},N=a(106),k=a.n(N),O=a(22),j=a(25),x=a(20),w=a.n(x),C=(a(112),a(32),function(e){var t=e.handleDelete,a=void 0===t?function(){return console.log("?>?")}:t,n=e.user,c=e.author,r=e.date,o=e.content;return l.a.createElement("div",{className:"cac_commentary"},l.a.createElement("div",{className:"cac_commentary_heading"},l.a.createElement("img",{src:c&&c.photoURL||w.a,alt:c?c.displayName:"",className:"cac_commentary_photo"}),l.a.createElement("div",{className:"cac_commentary_heading_text"},l.a.createElement(m.b,{to:"/profile/".concat(c.id),className:"cac_commentary_name--link"},l.a.createElement(O.a,{className:"cac_commentary_name",rank:c?c.rank:null},c?c.displayName:"")),l.a.createElement(k.a,{className:"cac_post_date",date:r.toDate()})),l.a.createElement(j.a,{handleDelete:a,className:"cac_commentary_options",user:n,author:c})),l.a.createElement(E,{content:o,className:"cac_commentary_content"}))}),R=function(){return l.a.createElement("div",{className:"cac_commentary cac_loading-commentary"},l.a.createElement("div",{className:"gradient cac_loading-commentary_photo"}),l.a.createElement("div",{className:"gradient cac_loading-commentary_name"}),l.a.createElement("div",{className:"gradient cac_loading_commentary_content"}))},L=a(9);function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function S(e,t){if(null==e)return{};var a,n,c=function(e,t){if(null==e)return{};var a,n,c={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(c[a]=e[a]);return c}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(c[a]=e[a])}return c}var D=l.a.createElement("title",null,"ionicons-v5-f"),F=function(e){var t=e.svgRef,a=e.title,n=S(e,["svgRef","title"]);return l.a.createElement("svg",P({width:512,height:512,viewBox:"0 0 512 512",ref:t},n),void 0===a?D:a?l.a.createElement("title",null,a):null,l.a.createElement("path",{d:"M352.92,80C288,80,256,144,256,144s-32-64-96.92-64C106.32,80,64.54,124.14,64,176.81c-1.1,109.33,86.73,187.08,183,252.42a16,16,0,0,0,18,0c96.26-65.34,184.09-143.09,183-252.42C447.46,124.14,405.68,80,352.92,80Z",style:{fill:"auto",stroke:"auto",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:32}}))},A=l.a.forwardRef((function(e,t){return l.a.createElement(F,P({svgRef:t},e))}));a.p;function V(){return(V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function M(e,t){if(null==e)return{};var a,n,c=function(e,t){if(null==e)return{};var a,n,c={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(c[a]=e[a]);return c}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(c[a]=e[a])}return c}var U=l.a.createElement("title",null,"ionicons-v5-l"),B=function(e){var t=e.svgRef,a=e.title,n=M(e,["svgRef","title"]);return l.a.createElement("svg",V({width:512,height:512,viewBox:"0 0 512 512",ref:t},n),void 0===a?U:a?l.a.createElement("title",null,a):null,l.a.createElement("path",{d:"M408,64H104a56.16,56.16,0,0,0-56,56V312a56.16,56.16,0,0,0,56,56h40v80l93.72-78.14a8,8,0,0,1,5.13-1.86H408a56.16,56.16,0,0,0,56-56V120A56.16,56.16,0,0,0,408,64Z",style:{fill:"auto",stroke:"auto",strokeLinejoin:"round",strokeWidth:32}}))},H=l.a.forwardRef((function(e,t){return l.a.createElement(B,V({svgRef:t},e))}));a.p;function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function J(e,t){if(null==e)return{};var a,n,c=function(e,t){if(null==e)return{};var a,n,c={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(c[a]=e[a]);return c}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(c[a]=e[a])}return c}var T=l.a.createElement("title",null,"ionicons-v5-h"),W=function(e){var t=e.svgRef,a=e.title,n=J(e,["svgRef","title"]);return l.a.createElement("svg",I({width:512,height:512,viewBox:"0 0 512 512",ref:t},n),void 0===a?T:a?l.a.createElement("title",null,a):null,l.a.createElement("path",{d:"M352,48H160a48,48,0,0,0-48,48V464L256,336,400,464V96A48,48,0,0,0,352,48Z",style:{fill:"auto",stroke:"auto",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:32}}))},Z=l.a.forwardRef((function(e,t){return l.a.createElement(W,I({svgRef:t},e))}));a.p,a(113),a(144),t.a=function(e){var t,a=e.user,c=e.from,d=void 0===c?"posts":c,p=e.showAuthor,_=void 0===p||p,f=e.enableLink,v=void 0===f||f,b=e.data,h=e.allUsers,g=e.preview,y=void 0!==g&&g,N=e.cropContent,x=void 0!==N&&N,P=e.commentary,S=void 0===P?{handleAddCommentary:function(){return null},showCommentaries:!1}:P,D=e.onClick,F=void 0===D?function(){return null}:D,V=e.parentHandleDelete,M=void 0===V?function(){return null}:V;t=h[b.author.id]||t;var U=Object(s.useState)(""),B=Object(o.a)(U,2),I=B[0],J=B[1],T=Object(s.useState)(!y&&a.logged&&b.likesList.includes(a.uid)),W=Object(o.a)(T,2),Y=W[0],q=W[1],z=Object(s.useState)(!y&&a.logged&&a.saved.includes(b.id)),G=Object(o.a)(z,2),K=G[0],Q=G[1],X=Object(u.g)(),$=Object(s.useState)(y?0:b.likesList.length),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],ne=function(e){var t;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=i.d.doc("commentaries/".concat(b.id)),console.log(e),a.next=4,r.a.awrap(t.update({commentaries:i.c.firestore.FieldValue.arrayRemove(e)}));case 4:case"end":return a.stop()}}))};return l.a.createElement(l.a.Fragment,null,t&&l.a.createElement("div",{className:"cac_post ".concat(x?"cac_post--crop":""),onClick:F},l.a.createElement("div",{className:"cac_post_heading"},_&&l.a.createElement("img",{src:t.photoURL||w.a,className:"cac_post_heading_photo",alt:t.displayName,onClick:function(e){e.stopPropagation(),X.push("/profile/".concat(t.id))}}),l.a.createElement("div",{className:"cac_post_text-container"},v?l.a.createElement(m.b,{to:"/".concat(d,"/").concat(b.id),className:"cac_post_title cac_post_title--link"},b.title):l.a.createElement("span",{className:"cac_post_title"},b.title),_&&l.a.createElement("span",{onClick:function(e){e.stopPropagation(),X.push("/profile/".concat(t.id))},className:"cac_post_author--link"},l.a.createElement(O.a,{className:"cac_post_author",rank:t.rank},t.displayName)),y?l.a.createElement("span",{className:"cac_post_date"},b.date):l.a.createElement(k.a,{className:"cac_post_date",live:!1,date:b.createdAt?1e3*b.createdAt.seconds:new Date})),l.a.createElement(j.a,{className:"cac_post_options",user:a,author:t,handleDelete:function(){var e=i.d.doc("test-posts/".concat(b.id));console.log("eee"),e.delete(),M()}})),l.a.createElement(E,{content:b.content,className:"cac_post_content markdown-body ".concat(x?"cac_post_content--crop":"")}),l.a.createElement("div",{className:"cac_post_interaction"},l.a.createElement("div",{className:"cac_post_interaction-box",onClick:function(e){e.stopPropagation();!y&&a.logged?function(){var e;r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(q(!Y),e=i.d.doc("test-posts/".concat(b.id)),Y){t.next=8;break}return ae(te+1),t.next=6,r.a.awrap(e.update({likesList:i.c.firestore.FieldValue.arrayUnion(a.uid)}));case 6:t.next=11;break;case 8:return ae(te-1),t.next=11,r.a.awrap(e.update({likesList:i.c.firestore.FieldValue.arrayRemove(a.uid)}));case 11:case"end":return t.stop()}}))}():alert("You need to sign in to like posts")}},l.a.createElement("span",{className:"cac_post_interaction-counter"},te),l.a.createElement(A,{className:"cac_post_icon cac_post_heart ".concat(Y?"cac_post_heart--filled":"")}),l.a.createElement("span",{className:"cac_post_interaction-label"},"Like")),l.a.createElement("div",{className:"cac_post_interaction-box cac_post_interaction-box--comment"},l.a.createElement("span",{className:"cac_post_interaction-counter"},b.commentariesCount),l.a.createElement(H,{className:"cac_post_icon cac_post_comment"}),l.a.createElement("span",{className:"cac_post_interaction-label"},"Comment")),l.a.createElement("div",{className:"cac_post_interaction-box",onClick:function(e){e.stopPropagation();!y&&a.logged?function(){var e;r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=i.d.doc("users/".concat(a.uid)),Q(!K),K){t.next=7;break}return t.next=5,r.a.awrap(e.update({saved:i.c.firestore.FieldValue.arrayUnion(b.id)}));case 5:t.next=9;break;case 7:return t.next=9,r.a.awrap(e.update({saved:i.c.firestore.FieldValue.arrayRemove(b.id)}));case 9:case"end":return t.stop()}}))}():alert("you need to sign in to save posts")}},l.a.createElement(Z,{className:"cac_post_icon cac_post_bookmark ".concat(K?"cac_post_bookmark--filled":"")}),l.a.createElement("span",{className:"cac_post_interaction-label"},"Save"))),S.showCommentaries&&l.a.createElement("div",{className:"cac_post_commentaries-section"},a.logged&&l.a.createElement("div",{className:"cac_post_create-commentary"},l.a.createElement("textarea",{className:"cac_post_create-commentary_textarea",value:I,onChange:function(e){return J(e.target.value)}}),l.a.createElement(L.b,{className:"cac_poist_create-commentary_button",onClick:function(){S.handleAddCommentary(I),J("")}},"Comment")),l.a.createElement("div",{className:"cac_post_commentaries"},S.isLoading?l.a.createElement(l.a.Fragment,null,l.a.createElement(R,null),l.a.createElement(R,null),l.a.createElement(R,null)):S.data.sort((function(e,t){return t.date.toDate()-e.date.toDate()})).map((function(e,t){return l.a.createElement(C,{handleDelete:function(){return ne(e)},postRef:"".concat(d,"/").concat(e.id),key:t,user:a,author:Object(n.a)({id:e.author},h[e.author]),content:e.content,date:e.date})}))))))}},121:function(e,t){},511:function(e,t,a){},512:function(e,t,a){},536:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(17),o=a(34),s=a(7),l=a(114),i=a(4),u=a.n(i),m=a(3),d=a(6),p=(a(511),a(9)),_=function(e){var t=e.type,a=e.user,r=Object(n.useState)(!1),s=Object(m.a)(r,2),l=s[0],i=s[1],_=Object(n.useState)(""),f=Object(m.a)(_,2),v=f[0],b=f[1],h=Object(n.useState)(""),g=Object(m.a)(h,2),y=g[0],E=g[1],N=Object(n.useState)(!1),k=Object(m.a)(N,2),O=k[0],j=k[1],x=Object(n.useContext)(o.a),w=function(){b(""),E(""),i(!1)};return c.a.createElement("div",{className:"cac_create_post_small ".concat(l?"editing":"not-editing")},l?c.a.createElement(c.a.Fragment,null,c.a.createElement("textarea",{placeholder:"Title",value:y,onChange:function(e){return E(e.target.value)},className:"cac_create_post_small_textarea cac_create_post_small_textarea--title"}),c.a.createElement("textarea",{placeholder:"Content (Markdown)",value:v,onChange:function(e){return b(e.target.value)},className:"cac_create_post_small_textarea cac_create_post_small_textarea--content"}),c.a.createElement(p.b,{className:"cac_create_post_small_button cac_create_post_small_button--post ".concat(O||""===y||""===v?"cac_create_post_small_button--disabled":""),onClick:function(){O||(j(!0),function(){var e;u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e={title:y,content:v,type:t,comments:[],likesList:[],author:{id:a.uid,displayName:a.displayName},createdAt:d.c.firestore.FieldValue.serverTimestamp(),timestamp:d.c.firestore.FieldValue.serverTimestamp(),key:Date.now()},n.prev=1,n.next=4,u.a.awrap(d.d.collection("test-posts").add(e));case 4:w(),x.fetch(t,!0),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),console.error(n.t0);case 11:j(!1);case 12:case"end":return n.stop()}}),null,null,[[1,8]])}())}},"Post"),c.a.createElement(p.b,{className:"cac_create_post_small_button cac_create_post_small_button--cancel",onClick:w},"Cancel")):c.a.createElement(c.a.Fragment,null,c.a.createElement("textarea",{className:"cac_create_post_small_textarea",value:"",placeholder:"Create Post",onClick:function(){return i(!0)},onChange:function(e){i(!0),E(e.target.value)}}),c.a.createElement(p.b,{className:"cac_create_post_small_button cac_create_post_small_button--post ".concat(O||""===y||""===v?"cac_create_post_small_button--disabled":"")},"Post")))};a(512),t.default=function(e){var t=e.className,a=void 0===t?"":t,i=e.Fallback,u=e.from,m=e.type,d=e.showAuthor,p=void 0!==d&&d,f=e.enableCreate,v=void 0!==f&&f,b=Object(n.useContext)(o.a),h=Object(n.useContext)(s.c),g=Object(n.useContext)(s.a),y=Object(r.g)();Object(n.useEffect)((function(){b.status.IDB&&b.fetch(m)}),[m,b.status.IDB]);return c.a.createElement("div",{className:"cac_posts ".concat(a)},v&&c.a.createElement(_,{type:m,user:h}),!h.isLoading&&b.status[m]?b.posts[m].map((function(e,t){return c.a.createElement(l.a,{user:h,key:t,showAuthor:p,data:e,allUsers:g.usersMap,cropContent:!0,onClick:function(){return t=e.id,void y.push("/".concat(u,"/").concat(t));var t},showCommentaries:!1,from:u})})):c.a.createElement(i,null))}}}]);
//# sourceMappingURL=2.3a63f7cb.chunk.js.map