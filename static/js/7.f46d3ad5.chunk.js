(this.webpackJsonpcac_site=this.webpackJsonpcac_site||[]).push([[7],{100:function(e,t,a){},101:function(e,t,a){},102:function(e,t,a){"use strict";var c=a(1),n=a(4),r=a.n(n),o=a(3),s=a(0),l=a.n(s),i=a(6),u=a(18),p=a(5),m=a(532),d=a(107),f=a.n(d),_=a(108),b=a.n(_),v=a(543),h=a(534),g=(a(98),function(e){var t=e.language,a=void 0===t?null:t,c=e.value;return l.a.createElement(v.a,{language:a,style:h.a},c)}),y=a(96),E=(a(99),b()({isValidNode:function(e){return"script"!==e.type&&"break"!==e.type}})),O=function(e){var t=e.content,a=void 0===t?"":t,c=e.className,n=void 0===c?"":c;return l.a.createElement(f.a,{className:" cac_markdown ".concat(n),source:Object(y.c)(a),renderers:{code:g},escapeHtml:!1,astPlugins:[E]})},N=a(97),k=a.n(N),j=a(20),x=a(24),w=a(19),C=a.n(w),P=(a(100),function(e){var t=e.handleDelete,a=void 0===t?function(){return console.log("?>?")}:t,c=e.user,n=e.author,r=e.date,o=e.content;return l.a.createElement("div",{className:"cac_commentary"},l.a.createElement("div",{className:"cac_commentary_heading"},l.a.createElement("img",{src:n&&n.photoURL||C.a,alt:n?n.displayName:"",className:"cac_commentary_photo"}),l.a.createElement("div",{className:"cac_commentary_heading_text"},l.a.createElement(p.b,{to:"/profile/".concat(n.id),className:"cac_commentary_name--link"},l.a.createElement(j.a,{className:"cac_commentary_name",rank:n?n.rank:null},n?n.displayName:"")),l.a.createElement(k.a,{className:"cac_post_date",date:r.toDate()})),l.a.createElement(x.a,{handleDelete:a,className:"cac_commentary_options",user:c,author:n})),l.a.createElement(O,{content:o,className:"cac_commentary_content"}))}),R=a(9);function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(e[c]=a[c])}return e}).apply(this,arguments)}function L(e,t){if(null==e)return{};var a,c,n=function(e,t){if(null==e)return{};var a,c,n={},r=Object.keys(e);for(c=0;c<r.length;c++)a=r[c],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(c=0;c<r.length;c++)a=r[c],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var D=l.a.createElement("title",null,"ionicons-v5-f"),M=function(e){var t=e.svgRef,a=e.title,c=L(e,["svgRef","title"]);return l.a.createElement("svg",S({width:512,height:512,viewBox:"0 0 512 512",ref:t},c),void 0===a?D:a?l.a.createElement("title",null,a):null,l.a.createElement("path",{d:"M352.92,80C288,80,256,144,256,144s-32-64-96.92-64C106.32,80,64.54,124.14,64,176.81c-1.1,109.33,86.73,187.08,183,252.42a16,16,0,0,0,18,0c96.26-65.34,184.09-143.09,183-252.42C447.46,124.14,405.68,80,352.92,80Z",style:{fill:"auto",stroke:"auto",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:32}}))},V=l.a.forwardRef((function(e,t){return l.a.createElement(M,S({svgRef:t},e))}));a.p;function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(e[c]=a[c])}return e}).apply(this,arguments)}function U(e,t){if(null==e)return{};var a,c,n=function(e,t){if(null==e)return{};var a,c,n={},r=Object.keys(e);for(c=0;c<r.length;c++)a=r[c],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(c=0;c<r.length;c++)a=r[c],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var H=l.a.createElement("title",null,"ionicons-v5-l"),A=function(e){var t=e.svgRef,a=e.title,c=U(e,["svgRef","title"]);return l.a.createElement("svg",F({width:512,height:512,viewBox:"0 0 512 512",ref:t},c),void 0===a?H:a?l.a.createElement("title",null,a):null,l.a.createElement("path",{d:"M408,64H104a56.16,56.16,0,0,0-56,56V312a56.16,56.16,0,0,0,56,56h40v80l93.72-78.14a8,8,0,0,1,5.13-1.86H408a56.16,56.16,0,0,0,56-56V120A56.16,56.16,0,0,0,408,64Z",style:{fill:"auto",stroke:"auto",strokeLinejoin:"round",strokeWidth:32}}))},J=l.a.forwardRef((function(e,t){return l.a.createElement(A,F({svgRef:t},e))}));a.p;function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(e[c]=a[c])}return e}).apply(this,arguments)}function B(e,t){if(null==e)return{};var a,c,n=function(e,t){if(null==e)return{};var a,c,n={},r=Object.keys(e);for(c=0;c<r.length;c++)a=r[c],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(c=0;c<r.length;c++)a=r[c],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var I=l.a.createElement("title",null,"ionicons-v5-h"),W=function(e){var t=e.svgRef,a=e.title,c=B(e,["svgRef","title"]);return l.a.createElement("svg",T({width:512,height:512,viewBox:"0 0 512 512",ref:t},c),void 0===a?I:a?l.a.createElement("title",null,a):null,l.a.createElement("path",{d:"M352,48H160a48,48,0,0,0-48,48V464L256,336,400,464V96A48,48,0,0,0,352,48Z",style:{fill:"auto",stroke:"auto",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:32}}))},Z=l.a.forwardRef((function(e,t){return l.a.createElement(W,T({svgRef:t},e))}));a.p,a(101),a(112),t.a=function(e){var t,a=e.user,n=e.from,d=void 0===n?"posts":n,f=e.showAuthor,_=void 0===f||f,b=e.enableLink,v=void 0===b||b,h=e.data,g=e.allUsers,y=e.preview,E=void 0!==y&&y,N=e.cropContent,w=void 0!==N&&N,S=e.showCommentaries,L=void 0!==S&&S,D=e.onClick,M=void 0===D?function(){return null}:D,F=e.parentHandleDelete,U=void 0===F?function(){return null}:F;t=g[h.author.id]||t;var H=Object(s.useState)(!1),A=Object(o.a)(H,2),T=A[0],B=A[1],I=Object(s.useState)(""),W=Object(o.a)(I,2),Y=W[0],q=W[1],Q=!E&&a.logged&&h.likesList.includes(a.uid),z=Object(s.useState)(!E&&a.logged&&a.saved.includes(h.id)),G=Object(o.a)(z,2),K=G[0],X=G[1];Object(s.useEffect)((function(){!function(){var e,t;r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(i.d.collection("users").get());case 2:e=a.sent,t=[],e.forEach((function(e){var a=e.data(),c=a.email,n=a.displayName;t.push({id:e.id,email:c,displayName:n})}));case 5:case"end":return a.stop()}}))}()}),[]);var $=Object(u.g)(),ee=function(e){var t;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=i.d.doc("".concat(d,"/").concat(h.id)),a.next=3,r.a.awrap(t.update({comments:i.c.firestore.FieldValue.arrayRemove(e)}));case 3:case"end":return a.stop()}}))};return l.a.createElement(l.a.Fragment,null,t&&l.a.createElement("div",{className:"cac_post ".concat(w?"cac_post--crop":""),onClick:M},l.a.createElement("div",{className:"cac_post_heading"},_&&l.a.createElement("img",{src:t.photoURL||C.a,className:"cac_post_heading_photo",alt:t.displayName,onClick:function(e){e.stopPropagation(),$.push("/profile/".concat(t.id))}}),l.a.createElement("div",{className:"cac_post_text-container"},v?l.a.createElement(p.b,{to:"/".concat(d,"/").concat(h.id),className:"cac_post_title cac_post_title--link"},h.title):l.a.createElement("span",{className:"cac_post_title"},h.title),_&&l.a.createElement("span",{onClick:function(e){e.stopPropagation(),$.push("/profile/".concat(t.id))},className:"cac_post_author--link"},l.a.createElement(j.a,{className:"cac_post_author",rank:t.rank},t.displayName)),E?l.a.createElement("span",{className:"cac_post_date"},h.date):l.a.createElement(k.a,{className:"cac_post_date",live:!1,date:h.timestamp?h.timestamp.toDate():new Date})),l.a.createElement(x.a,{className:"cac_post_options",user:a,author:t,handleDelete:function(){i.d.doc("".concat(d,"/").concat(h.id)).delete(),U()}})),l.a.createElement(O,{content:h.content,className:"cac_post_content markdown-body ".concat(w?"cac_post_content--crop":"")}),l.a.createElement("div",{className:"cac_post_interaction"},l.a.createElement("div",{className:"cac_post_interaction-box",onClick:function(e){e.stopPropagation();!E&&a.logged?function(){var e;r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=i.d.doc("".concat(d,"/").concat(h.id)),Q){t.next=6;break}return t.next=4,r.a.awrap(e.update({likesList:i.c.firestore.FieldValue.arrayUnion(a.uid)}));case 4:t.next=8;break;case 6:return t.next=8,r.a.awrap(e.update({likesList:i.c.firestore.FieldValue.arrayRemove(a.uid)}));case 8:case"end":return t.stop()}}))}():alert("You need to sign in to like posts")}},l.a.createElement("span",{className:"cac_post_interaction-counter"},h.likesList.length),l.a.createElement(V,{className:"cac_post_icon cac_post_heart ".concat(Q?"cac_post_heart--filled":"")}),l.a.createElement("span",{className:"cac_post_interaction-label"},"Like")),l.a.createElement("div",{className:"cac_post_interaction-box cac_post_interaction-box--comment"},l.a.createElement("span",{className:"cac_post_interaction-counter"},h.comments.length),l.a.createElement(J,{className:"cac_post_icon cac_post_comment"}),l.a.createElement("span",{className:"cac_post_interaction-label"},"Comment")),l.a.createElement("div",{className:"cac_post_interaction-box",onClick:function(e){e.stopPropagation();!E&&a.logged?function(){var e;r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=i.d.doc("users/".concat(a.uid)),X(!K),K){t.next=7;break}return t.next=5,r.a.awrap(e.update({saved:i.c.firestore.FieldValue.arrayUnion(h.id)}));case 5:t.next=9;break;case 7:return t.next=9,r.a.awrap(e.update({saved:i.c.firestore.FieldValue.arrayRemove(h.id)}));case 9:case"end":return t.stop()}}))}():alert("you need to sign in to save posts")}},l.a.createElement(Z,{className:"cac_post_icon cac_post_bookmark ".concat(K?"cac_post_bookmark--filled":"")}),l.a.createElement("span",{className:"cac_post_interaction-label"},"Save"))),L&&l.a.createElement("div",{className:"cac_post_commentaries-section"},a.logged&&l.a.createElement("div",{className:"cac_post_create-commentary"},l.a.createElement("textarea",{className:"cac_post_create-commentary_textarea",value:Y,onChange:function(e){return q(e.target.value)}}),l.a.createElement(R.b,{className:"cac_poist_create-commentary_button",onClick:function(){console.log(d,h);!T&&Y&&function(){var e,t;r.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return B(!0),e=i.d.doc("".concat(d,"/").concat(h.id)),t={id:Object(m.a)(),author:a.uid,content:Y,date:new Date},c.next=5,r.a.awrap(e.update({comments:i.c.firestore.FieldValue.arrayUnion(t)}));case 5:B(!1),q("");case 7:case"end":return c.stop()}}))}()}},"Comment")),l.a.createElement("div",{className:"cac_post_commentaries"},h.comments.sort((function(e,t){return t.date.toDate()-e.date.toDate()})).map((function(e,t){return l.a.createElement(P,{handleDelete:function(){return ee(e)},postRef:"".concat(d,"/").concat(e.id),key:t,user:a,author:Object(c.a)({id:e.author},g[e.author]),content:e.content,date:e.date})}))))))}},106:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var c=a(0),n=a.n(c);a(113);t.b=function(e){var t=e.children;return n.a.createElement("div",{className:"cac_popup"},t)};var r=function(e){var t=e.children,a=e.className,r=void 0===a?"error":a,o=e.onClick,s=void 0===o?function(){return null}:o;return Object(c.useEffect)((function(){var e=setTimeout((function(){s()}),5e3);return function(){return clearTimeout(e)}})),n.a.createElement("div",{onClick:s,className:"cac_popup-top ".concat(r||"")},t)}},109:function(e,t){},113:function(e,t,a){},513:function(e,t,a){},536:function(e,t,a){"use strict";a.r(t);var c=a(4),n=a.n(c),r=a(3),o=a(0),s=a.n(o),l=a(33),i=a(18),u=a(6),p=a(31),m=a(7),d=a(35),f=a(9),_=a(102),b=a(106);a(513);t.default=function(e){var t=e.Fallback,a=Object(o.useContext)(p.a),c=Object(o.useContext)(m.c),v=Object(o.useContext)(m.a),h=Object(o.useState)(""),g=Object(r.a)(h,2),y=g[0],E=g[1],O=Object(o.useState)(""),N=Object(r.a)(O,2),k=N[0],j=N[1],x=Object(o.useState)(!1),w=Object(r.a)(x,2),C=w[0],P=w[1],R=Object(o.useState)(!1),S=Object(r.a)(R,2),L=S[0],D=S[1],M=Object(o.useState)({visible:!1,content:"",type:""}),V=Object(r.a)(M,2),F=V[0],U=V[1],H=Object(o.useState)(null),A=Object(r.a)(H,2),J=A[0],T=A[1],B=Object(o.useState)(!1),I=Object(r.a)(B,2),W=I[0],Z=I[1],Y=Object(o.useRef)(null),q=Object(l.useMediaQuery)({query:"(max-width: 980px)"}),Q=Object(i.g)();Object(o.useEffect)((function(){a.fetch.public()}),[a.fetch]);var z=function(){j(""),E(""),P("")};return Object(d.a)(Y,(function(){return Z(!1)})),s.a.createElement("div",{className:"cac_public"},W&&s.a.createElement("div",{className:"cac_public_background-black"},s.a.createElement("div",{className:"cac_public_post-container",ref:Y},s.a.createElement(_.a,{allUsers:v.usersMap,className:"cac_public_post",data:a.posts.public.find((function(e){return e.id===J})),cropContent:!1,showCommentaries:!0,user:c,from:"public",parentHandleDelete:function(){Z(!1),U({visible:!0,content:"Post removed",type:"success"})}}))),F.visible&&s.a.createElement(b.a,{className:F.type,onClick:function(){return U({visible:!1})}},F.content),C?s.a.createElement("div",{className:"cac_public_create cac_public_create--creating"},s.a.createElement("textarea",{className:"cac_public_create_text-area cac_public_create_text-area--title",value:k,placeholder:"Title",onChange:function(e){return j(e.target.value)}}),s.a.createElement("textarea",{className:"cac_public_create_text-area cac_public_create_text-area--content",value:y,placeholder:"Content (Markdown)",onChange:function(e){return E(e.target.value)}}),s.a.createElement(f.b,{className:"cac_public_create_button cac_public_create_button--post ".concat(L||""===k||""===y?"cac_public_create_button--disabled":""),onClick:function(){c.logged?L||""===k||""===y||function(){var e;n.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return D(!0),e={title:k,content:y,type:"public-post",comments:[],likesList:[],likesCounter:0,author:{id:c.uid,displayName:c.displayName},timestamp:u.c.firestore.FieldValue.serverTimestamp(),key:Date.now()},t.prev=2,t.next=5,n.a.awrap(u.d.collection("public").add(e));case 5:U({visible:!0,content:"Post published succesfully",type:"success"}),z(),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),console.error(t.t0),U({visible:!0,content:"Error publishing post",type:"error"});case 13:D(!1);case 14:case"end":return t.stop()}}),null,null,[[2,9]])}():U({visible:!0,type:"error",content:"You need to sign in to post"})}},"Post"),s.a.createElement(f.b,{className:"cac_public_create_button cac_public_create_button--cancel",onClick:z},"Cancel")):s.a.createElement("div",{className:"cac_public_create cac_public_create--default"},s.a.createElement("textarea",{className:"cac_public_create_text-area cac_public_create_text-area--title",value:"",onChange:function(e){P(!0),j(e.target.value)},onClick:function(){return P(!0)},placeholder:"Create Post"}),s.a.createElement(f.b,{className:"cac_public_create_button  cac_public_create_button--post cac_public_create_button--disabled"},"Post")),s.a.createElement("div",{className:"cac_public_posts"},!c.isLoading&&a.posts.public.length>0&&Object.keys(v.usersMap).length>0?a.posts.public.map((function(e,t){return s.a.createElement(_.a,{user:c,key:t,data:e,allUsers:v.usersMap,cropContent:!0,onClick:function(){return t=e.id,void(q?Q.push("/public/".concat(t)):(T(t),Z(!0)));var t},showCommentaries:!1,from:"public",parentHandleDelete:function(){U({visible:!0,content:"Post removed",type:"success"})}})})):s.a.createElement(t,null)))}},96:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return o}));var c=function(e){switch(e){case 0:return"January";case 1:return"February";case 2:return"March";case 3:return"April";case 4:return"May";case 5:return"June";case 6:return"July";case 7:return"August";case 8:return"September";case 9:return"October";case 10:return"November";case 11:return"December";default:return null}},n=function(e){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=a.length,n=0;n<e;n++)t+=a[Math.floor(Math.random()*c)];return t},r=/<br>|<\/br>|<br\/>/gi,o=function(e){return e.replace(r,"")}},98:function(e,t,a){},99:function(e,t,a){}}]);
//# sourceMappingURL=7.f46d3ad5.chunk.js.map