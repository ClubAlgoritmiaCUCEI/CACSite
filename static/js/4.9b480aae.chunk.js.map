{"version":3,"sources":["Components/single-post/index.js"],"names":["SinglePostView","match","from","Fallback","showAuthor","id","params","posts","useContext","PostsContext","user","UserContext","allUsers","AllUsersContext","useState","undefined","postData","setPostData","useEffect","fetchPost","a","postsRef","firestore","doc","get","snap","data","console","error","status","editorial","post","find","p","isLoading","enableLink","usersMap","cropContent","showCommentaries"],"mappings":"qMA0DeA,UA/CQ,SAAC,GAAmD,IAAjDC,EAAgD,EAAhDA,MAAOC,EAAyC,EAAzCA,KAAMC,EAAmC,EAAnCA,SAAmC,IAAzBC,kBAAyB,SAChEC,EAAOJ,EAAMK,OAAbD,GACFE,EAAQC,qBAAWC,KACnBC,EAAOF,qBAAWG,KAClBC,EAAWJ,qBAAWK,KAJ4C,EAKxCC,wBAASC,GAL+B,mBAKjEC,EALiE,KAKvDC,EALuD,KA6BxE,OArBAC,qBAAU,WACR,IAAMC,EAAS,uCAAG,8BAAAC,EAAA,6DACVC,EAAWC,IAAUC,IAAV,qBAA4BlB,IAD7B,kBAGKgB,EAASG,MAHd,OAGRC,EAHQ,OAIdR,EAAY,aAAEZ,GAAIoB,EAAKpB,IAAOoB,EAAKC,SAJrB,gDAMdC,QAAQC,MAAR,MANc,yDAAH,qDASf,GAAIrB,EAAMsB,OAAOC,UAAW,CAC1B,IAAMC,EAAOxB,EAAMA,MAAMuB,UAAUE,MAAK,SAAAC,GAAC,OAAIA,EAAE5B,KAAOA,KAClD0B,EACFd,EAAYc,GAETZ,SAELA,MAED,CAACd,EAAIE,EAAOL,IAGb,oCACIQ,EAAKwB,WAActB,EAASsB,YAAalB,EAWvC,kBAACb,EAAD,MAVF,kBAAC,IAAD,CACEgC,YAAY,EACZ/B,WAAYA,EACZQ,SAAUA,EAASwB,SACnBV,KAAMV,EACNd,KAAMA,EACNmC,aAAa,EACbC,kBAAkB,EAClB5B,KAAMA","file":"static/js/4.9b480aae.chunk.js","sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\n\r\nimport { firestore, firebase } from \"../../firebase\";\r\n\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n\r\nimport { PostsContext } from \"../../Providers/postsProvider\";\r\nimport { UserContext, AllUsersContext } from \"../../Providers/userProvider\";\r\n\r\nimport Post from \"../post\";\r\n\r\nconst SinglePostView = ({ match, from, Fallback, showAuthor = false }) => {\r\n  const { id } = match.params;\r\n  const posts = useContext(PostsContext);\r\n  const user = useContext(UserContext);\r\n  const allUsers = useContext(AllUsersContext);\r\n  const [postData, setPostData] = useState(undefined);\r\n\r\n\r\n  useEffect(() => {\r\n    const fetchPost = async () => {\r\n      const postsRef = firestore.doc(`test-posts/${id}`);\r\n      try {\r\n        const snap = await postsRef.get();\r\n        setPostData({ id: snap.id, ...snap.data() });\r\n      } catch (e) {\r\n        console.error(e);\r\n      }\r\n    };\r\n    if (posts.status.editorial) {\r\n      const post = posts.posts.editorial.find(p => p.id === id);\r\n      if (post) {\r\n        setPostData(post);\r\n      }\r\n      else fetchPost();\r\n    } else {\r\n      fetchPost();\r\n    }\r\n  }, [id, posts, from]);\r\n\r\n  return (\r\n    <>\r\n      {!user.isLoading && !allUsers.isLoading && postData ? (\r\n        <Post\r\n          enableLink={false}\r\n          showAuthor={showAuthor}\r\n          allUsers={allUsers.usersMap}\r\n          data={postData}\r\n          from={from}\r\n          cropContent={false}\r\n          showCommentaries={true}\r\n          user={user}\r\n        />\r\n      ) : <Fallback />}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SinglePostView;\r\n"],"sourceRoot":""}